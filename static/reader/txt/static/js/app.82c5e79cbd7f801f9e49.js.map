{"version":3,"sources":["webpack:///./src/components/common/js/conf.js","webpack:///./src/App.vue?b314","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/components/common/js/index.js","webpack:///src/components/hdr/HdrBookmarks.vue","webpack:///./src/components/hdr/HdrBookmarks.vue?ec95","webpack:///./src/components/hdr/HdrBookmarks.vue","webpack:///src/components/hdr/HdrMore.vue","webpack:///./src/components/hdr/HdrMore.vue?fe94","webpack:///./src/components/hdr/HdrMore.vue","webpack:///src/components/hdr/HdrCatalogs.vue","webpack:///./src/components/hdr/HdrCatalogs.vue?aa2b","webpack:///./src/components/hdr/HdrCatalogs.vue","webpack:///./src/components/common/SetSlideItem.vue?a962","webpack:///./src/components/common/SetSlideItem.vue","webpack:///src/components/common/SetSlideItem.vue","webpack:///src/components/hdr/HdrSet.vue","webpack:///./src/components/hdr/HdrSet.vue?1980","webpack:///./src/components/hdr/HdrSet.vue","webpack:///src/components/Content.vue","webpack:///./src/components/Content.vue?3b3e","webpack:///./src/components/Content.vue","webpack:///src/components/Layout.vue","webpack:///./src/components/Layout.vue?5f36","webpack:///./src/components/Layout.vue","webpack:///./src/components/Loading.vue?0aa8","webpack:///./src/components/Loading.vue","webpack:///src/components/Loading.vue","webpack:///./src/router/index.js","webpack:///./src/components/common/AppBtn.vue?e1fc","webpack:///./src/components/common/AppBtn.vue","webpack:///src/components/common/AppBtn.vue","webpack:///./src/main.js","webpack:///./src/components/common/js/theme.js","webpack:///./src/components/common/js/caption.js","webpack:///./src/components/common/js/backendAPI.js"],"names":["axios","__webpack_require__","bapi","exports","userConf","theme","themeList","this","saveUserConf","self","conf","path","saveConfUrl","console","log","post","then","res","data","$Message","info","error","duration","closable","content","catch","err","getUserConf","getConfUrl","get","response","status","warning","selectortype_template_index_0_src_App","render","_h","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","normalizeComponent","ssrContext","js_caption","js","bus","getCaptionTitleCur","ReadPosition","updateReadPosition","setReadPositionScroll","goCaption","fetchCaptionContent","fetchCatalogs","fetchBookInfo","showBookInfoModal","downloadBook","colors","fontList","basePageWidth","defaultTheme","darkTheme","yelloTheme","greenTheme","pinkTheme","themeListItem","getBookmarkUrl","saveBookmarkUrl","HdrBookmarks","file","rp","markId","i","bookmarks","hdr_HdrBookmarks","_vm","placement","trigger","transfer","on","on-click","clickBookmark","icon","_v","slot","key","staticClass","staticStyle","text-align","name","type","_l","mark","index","divided","_s","captionTitle","click","$event","stopPropagation","delBookMark","size","percent","toFixed","saveTimeStr","components_hdr_HdrBookmarks","HdrBookmarks_normalizeComponent","HdrMore","val","hdr_HdrMore","hdrMoreHandler","components_hdr_HdrMore","HdrMore_normalizeComponent","HdrCatalogs","hdr_HdrCatalogs","catalog","text","components_hdr_HdrCatalogs","HdrCatalogs_normalizeComponent","common_SetSlideItem","domProps","innerHTML","title","value","show-input","min","max","input","on-input","slide","on-change","slideEnd","btnTips","clickBtn","components_common_SetSlideItem","SetSlideItem_normalizeComponent","arg","HdrSet","Object","SetSlideItem","fontColor","fontBg","bg","hdrBg","tmpConf","font","fontSize","letterSpacing","lineHeight","hPadding","vPadding","pageWidth","tmpTheme","t","list","saveConf","hdr_HdrSet","visible","setVisible","resetAllColors","setFontColor","setFontBg","setBg","setHdrBg","width","placeholder","filterable","setFont","item","float","color","resetFont","setFontSize","setEvHandler","resetFontSize","setLetterSpacing","resetLetterSpacing","setLineHeight","resetLineHeight","setHPadding","resetHPadding","setVPadding","resetVPadding","setPageWidth","resetPageWidth","style","background","useTheme","delTheme","padding","textAlign","margin","addTheme","resetUserConf","components_hdr_HdrSet","HdrSet_normalizeComponent","Content","caption","Date","readPosition","goBookmarkEvHandler","keyCode","goPrev","goNext","saveReadPosition","_saveReadPosition","components_Content","paddingLeft","paddingRight","paddingTop","paddingBottom","src_components_Content","Content_normalizeComponent","Layout_conf","assign_default","JSON","parse","stringify_default","dir","cata","p","prevCaption","nextCaption","components_Layout","fontFamily","relDir","goCaptionByCatalog","sendCatalogs","recvCatalogs","model","callback","$$v","expression","nativeOn","scroll","catalogs","updateContentEv","updateContentEvHandler","src_components_Layout","Layout_normalizeComponent","Layout","components_Loading","fix","src_components_Loading","Loading_normalizeComponent","vue_esm","use","vue_router_esm","router","routes","component","scrollBehavior","to","from","savedPosition","x","y","common_AppBtn","shape","components_common_AppBtn","AppBtn_normalizeComponent","config","productionTip","iview_default","a","el","components","App","template","defaultThemeListItem","darkThemeListItem","yelloThemeListItem","greenThemeListItem","latterSpacing","replace","parseInt","getCaptionTitleByCaption","fileInfo","Words","Chapters","ModTime","$Modal","Name","scrollTop","scrollMax","saveTime","toString","document","getElementById","scrollTopMax","scrollHeight","clientHeight","toLocaleDateString","toLocaleTimeString","m","$router","push","loading","contentUrl","destroy","errStr","catalogUrl","catalogsStr","cls","split","length","splitCatalogs","getElementsByTagName","$emit","infoPath","bookInfoUrl","createElement","href","downloadBookUrl","download","body","appendChild","removeChild","bookRoot","bookmarkRoot","encodeURIComponent"],"mappings":"0GAAA,IAAIA,EAAQC,EAAQ,QAChBC,EAAOD,EAAQ,QAEnBE,EAAQC,SAKR,SAAkBC,EAAOC,GACrBC,KAAKF,MAAQA,EACbE,KAAKD,UAAYA,GANrBH,EAAQK,aASR,SAAsBC,EAAMC,GACxBC,KAAOT,EAAKU,YACZC,QAAQC,IAAI,iBAAmBH,MAC/BX,EAAMe,KAAKJ,KAAMD,GAAMM,KAAK,SAASC,GACjCJ,QAAQC,IAAIG,GACI,MAAZA,EAAIC,MAA4B,IAAZD,EAAIC,KACxBT,EAAKU,SAASC,KAAK,QAEnBX,EAAKU,SAASE,OAAOC,SAAU,EAAGC,UAAU,EAAMC,QAAS,SAAWP,EAAIC,SAE/EO,MAAM,SAASC,GACdb,QAAQC,IAAIY,GACZjB,EAAKU,SAASE,OAAOC,SAAU,EAAGC,UAAU,EAAMC,QAAS,SAAWE,OApB9EvB,EAAQwB,YAwBR,SAAqBlB,GACjBI,QAAQC,IAAI,kBAAoBZ,EAAK0B,YAErC5B,EAAM6B,IAAI3B,EAAK0B,YAAYZ,KAAK,SAASc,GACrC,GAAuB,KAAnBA,EAASC,OAKb,GAAKD,EAASZ,KAAd,CAKA,IAAIR,EAAOoB,EAASZ,KACpBT,EAAKJ,MAAQK,EAAKL,MAClBI,EAAKH,UAAYI,EAAKJ,eANlBG,EAAKU,SAASC,KAAK,gBALnBX,EAAKU,SAASa,SAASV,SAAU,GAAIC,UAAU,EAAMC,QAAS,sBAAwBM,EAASC,WAapGN,MAAM,SAASJ,GACdZ,EAAKU,SAASE,OAAOC,SAAU,GAAIC,UAAU,EAAMC,QAAS,iBAAmBH,0KC7CvFY,GADiBC,OAFjB,WAA0B,IAAaC,EAAb5B,KAAa6B,eAA0BC,EAAvC9B,KAAuC+B,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,OAAOC,GAAA,SAAYH,EAAA,oBAE5GI,oBCCjB,IAuBAC,EAvBAzC,EAAA,OAcA0C,OCRA,ODUAV,GATA,EAVA,SAAAW,GACA3C,EAAA,SAaA,KAEA,MAUA,mFE1BI4C,EAAU5C,EAAQ,QAClBI,EAAQJ,EAAQ,QAChBS,EAAOT,EAAQ,QACfC,EAAOD,EAAQ,QAEnB6C,GAEIC,IAAK,KAGLC,mBAAoBH,EAAQG,mBAC5BC,aAAcJ,EAAQI,aACtBC,mBAAoBL,EAAQK,mBAC5BC,sBAAuBN,EAAQM,sBAC/BC,UAAWP,EAAQO,UACnBC,oBAAqBR,EAAQQ,oBAC7BC,cAAeT,EAAQS,cACvBC,cAAeV,EAAQU,cACvBC,kBAAmBX,EAAQW,kBAC3BC,aAAcZ,EAAQY,aAGtBpD,MAAOA,EAAMA,MAEbqD,OAAQrD,EAAMqD,OACdC,SAAUtD,EAAMsD,SAChBC,cAAevD,EAAMuD,cAErBC,aAAcxD,EAAMwD,aACpBC,UAAWzD,EAAMyD,UACjBC,WAAY1D,EAAM0D,WAClBC,WAAY3D,EAAM2D,WAClBC,UAAW5D,EAAM4D,UAEjBC,cAAe7D,EAAM6D,cACrB5D,UAAWD,EAAMC,UAGjBF,SAAUM,EAAKN,SACfI,aAAcE,EAAKF,aACnBmB,YAAajB,EAAKiB,YAGlBwC,eAAgBjE,EAAKiE,eACrBC,gBAAiBlE,EAAKkE,iBCrB1BC,mDAEA,0EA4BA,SAAA5D,eAEA,kDACA6D,yDAGApD,+CAGAG,MA9BAd,oCAiCA,SAAAE,eAEA,4DACA6D,8HAKApD,8EAGAQ,OAxCAnB,2CA2CA,IAAAE,oBArCAF,4BAuCA+D,6BACAC,oBACAA,IAEA,SAAA9D,EAAA+D,WAEAD,OAAA,uDAEA,sBACAE,IACA,iCAIAF,SAnDAC,wCAIA,eAiDA,SAAA/D,EAAA+D,SAWA,SAAAE,EAAAF,mDAIAC,eAbAD,gBAGA,6BADA,0DAIA,cAxDAA,MCjDA,IAGAG,GADiBzC,OAFjB,WAA0B,IAAA0C,EAAArE,KAAa4B,EAAAyC,EAAAxC,eAA0BC,EAAAuC,EAAAtC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,YAAsBE,OAAOsC,UAAA,aAAAC,QAAA,QAAAC,SAAA,IAAyDC,IAAKC,WAAAL,EAAAM,iBAA8B7C,EAAA,UAAeE,OAAO4C,KAAA,cAAmBP,EAAAQ,GAAA,KAAA/C,EAAA,gBAAiCE,OAAO8C,KAAA,QAAcA,KAAA,SAAahD,EAAA,gBAAqBiD,IAAA,aAAAC,YAAA,gBAAAC,aAA0DC,aAAA,UAAsBlD,OAAQmD,KAAA,aAAkBrD,EAAA,QAAaE,OAAOoD,KAAA,iBAAsBf,EAAAQ,GAAA,aAAAR,EAAAQ,GAAA,KAAAR,EAAAgB,GAAAhB,EAAA,mBAAAiB,GAAwE,OAAAxD,EAAA,gBAA0BiD,IAAAO,EAAAC,MAAAP,YAAA,gBAAAhD,OAAkDwD,QAAA,GAAAL,KAAAG,EAAArD,MAA6BH,EAAA,OAAYkD,YAAA,iBAA2BlD,EAAA,OAAYkD,YAAA,mBAA6BX,EAAAQ,GAAA,MAAAR,EAAAoB,GAAAH,EAAAI,iBAAArB,EAAAQ,GAAA,KAAA/C,EAAA,OAAkE2C,IAAIkB,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyBxB,EAAAyB,YAAAR,EAAArD,QAA2BH,EAAA,QAAakD,YAAA,qBAAAhD,OAAwCoD,KAAA,gBAAAW,KAAA,SAAoC,KAAA1B,EAAAQ,GAAA,KAAA/C,EAAA,KAAAuC,EAAAQ,GAAA,MAAAR,EAAAoB,IAAA,IAAAH,EAAAU,SAAAC,QAAA,WAAA5B,EAAAQ,GAAA,KAAA/C,EAAA,KAAAuC,EAAAQ,GAAA,QAAAR,EAAAoB,GAAAH,EAAAY,qBAAyJ,QAE5lChE,oBCCjB,IAuBAiE,EAvBAzG,EAAA,OAcA0G,CACAtC,EACAM,GATA,EAVA,SAAA/B,GACA3C,EAAA,SAaA,kBAEA,MAUA,QCVA2G,mBAEA,2EAGAC,UAEAA,OACA,YAkBA,SAAApG,kBAEA,2BAGA,gCADAA,gCAGA6D,OA3BA/D,MAIA,UACA,mBA0BA,YAxBA,UACA,SAwBA,SAAAE,eAEA,kCAEA,4BACA,wGAEA,KAvCAF,MAUA,UACA,2CACA+D,MACA,MACA,oCAEAuC,OCtCA,IAGAC,GADiB5E,OAFjB,WAA0B,IAAaC,EAAb5B,KAAa6B,eAA0BC,EAAvC9B,KAAuC+B,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,YAAsBE,OAAOsC,UAAA,aAAAC,QAAA,SAA2CE,IAAKC,WAA5I1E,KAA4IwG,kBAA+B1E,EAAA,UAAeE,OAAO4C,KAAA,cAAjM5E,KAAoN6E,GAAA,KAAA/C,EAAA,gBAAiCE,OAAO8C,KAAA,QAAcA,KAAA,SAAahD,EAAA,gBAAqBE,OAAOmD,KAAA,cAAnTnF,KAAsU6E,GAAA,UAAtU7E,KAAsU6E,GAAA,KAAA/C,EAAA,gBAAkDE,OAAOmD,KAAA,cAA/XnF,KAAkZ6E,GAAA,YAAlZ7E,KAAkZ6E,GAAA,KAAA/C,EAAA,gBAAoDE,OAAOmD,KAAA,WAA7cnF,KAA6d6E,GAAA,qBAEte3C,oBCCjB,IAuBAuE,EAvBA/G,EAAA,OAcAgH,CACAL,EACAE,GATA,EAVA,SAAAlE,GACA3C,EAAA,SAaA,kBAEA,MAUA,QCbAiH,0BAEA,2CAIA,+BAGA5D,yFAIAgB,gFAGAuC,mCACAA,MC3BAM,GADiBjF,OAFjB,WAA0B,IAAA0C,EAAArE,KAAa4B,EAAAyC,EAAAxC,eAA0BC,EAAAuC,EAAAtC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,YAAsBkD,YAAA,mBAAAhD,OAAsCC,GAAA,WAAAqC,UAAA,aAAAC,QAAA,QAAAC,SAAA,IAAyEC,IAAKC,WAAAL,EAAAxB,aAA0Bf,EAAA,UAAeE,OAAO4C,KAAA,mBAAwBP,EAAAQ,GAAA,KAAA/C,EAAA,gBAAiCE,OAAO8C,KAAA,QAAcA,KAAA,QAAaT,EAAAgB,GAAAhB,EAAA,kBAAAwC,GAAyC,OAAA/E,EAAA,gBAA0BiD,IAAA8B,EAAAtB,MAAAP,YAAA,wBAAAhD,OAA6DmD,KAAA0B,EAAA1B,QAAqBd,EAAAQ,GAAAR,EAAAoB,GAAAoB,EAAAC,aAAiC,IAEnhB5E,oBCCjB,IAuBA6E,EAvBArH,EAAA,OAcAsH,CACAL,EACAC,GATA,EAVA,SAAAvE,GACA3C,EAAA,SAaA,kBAEA,MAUA,QCvBAuH,GADiBtF,OAFjB,WAA0B,IAAA0C,EAAArE,KAAa4B,EAAAyC,EAAAxC,eAA0BC,EAAAuC,EAAAtC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBkD,YAAA,aAAuBlD,EAAA,OAAYoF,UAAUC,UAAA9C,EAAAoB,GAAApB,EAAA+C,UAA+B/C,EAAAQ,GAAA,KAAA/C,EAAA,OAAwBkD,YAAA,4BAAsClD,EAAA,UAAeE,OAAOqF,MAAAhD,EAAAgD,MAAAC,aAAA,GAAAC,IAAAlD,EAAAkD,IAAAC,IAAAnD,EAAAmD,KAA8D/C,IAAKgD,MAAApD,EAAAoD,MAAAC,WAAArD,EAAAsD,MAAAC,YAAAvD,EAAAwD,aAAiE,GAAAxD,EAAAQ,GAAA,KAAA/C,EAAA,WAAgCE,OAAOsC,UAAA,MAAArD,QAAAoD,EAAAyD,WAAyChG,EAAA,UAAekD,YAAA,mBAAAhD,OAAsCoD,KAAA,SAAeX,IAAKkB,MAAAtB,EAAA0D,YAAsB1D,EAAAQ,GAAA,yCAE5iB3C,oBCCjB,IAuBA8F,EAvBAtI,EAAA,OAcAuI,qCCeA,yDAGAC,yCAGAA,+CAGAA,+CAGAA,MDzBAjB,GATA,EAVA,SAAA5E,GACA3C,EAAA,SAaA,kBAEA,MAUA,QE4CAyI,0BAGA,aAEA,0BAGAC,oBAGAC,aAAAL,sCAGA,WACA7E,kBACAC,yBACAC,oCAEAC,sDAGAtD,4DAIAG,0CACAmI,2CACAC,oCACAC,mCACAC,wBACAC,+CAGAvI,wBACA+H,oBACAQ,4CAGAvI,qBACA+H,oBACAQ,wCAGAvI,iBACA+H,oBACAQ,2CAGAvI,oBACA+H,oBACAQ,0CAGAvI,mBACAwI,oBACAD,4CAGAvI,qCACAwI,uBACAD,8CAGAvI,uBACA+H,0BACAQ,gDAGAvI,yCACAyI,2BACAF,mDAGAvI,4BACA+H,0BACAQ,qDAGAvI,8CACA0I,gCACAH,gDAGAvI,yBACA+H,0BACAQ,kDAGAvI,2CACA2I,6BACAJ,8CAGAvI,uBACA+H,0BACAQ,gDAGAvI,yCACA4I,2BACAL,8CAGAvI,uBACA+H,0BACAQ,gDAGAvI,yCACA6I,2BACAN,+CAGAvI,wBACA+H,0BACAQ,iDAGAvI,0CACA8I,4BACAP,+CAGA5I,0DACAoJ,yDACAC,sBACAT,oDAGAvD,yCACApF,eAEA,0CAEA,YACA,MACA,EACA,WAIA,sCACAqJ,qBACAV,iCAGA,iBAEA,+EAKA3I,6BACA2I,0FAGA3I,+BACA2I,yCAGA,oCACAW,2BACAA,OCvOAC,GADiB3H,OAFjB,WAA0B,IAAA0C,EAAArE,KAAa4B,EAAAyC,EAAAxC,eAA0BC,EAAAuC,EAAAtC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,YAAsBE,OAAOC,GAAA,UAAAqC,UAAA,aAAAC,QAAA,SAAAC,SAAA,GAAA+E,QAAAlF,EAAAmF,cAAmG1H,EAAA,UAAeE,OAAO4C,KAAA,YAAkBH,IAAKkB,MAAA,SAAAC,GAAyBvB,EAAAmF,YAAAnF,EAAAmF,eAAmCnF,EAAAQ,GAAA,KAAA/C,EAAA,gBAAiCE,OAAO8C,KAAA,QAAcA,KAAA,SAAahD,EAAA,OAAYE,OAAOC,GAAA,aAAgBH,EAAA,OAAYkD,YAAA,YAAAhD,OAA+BC,GAAA,eAAkBH,EAAA,OAAYkD,YAAA,cAAwBX,EAAAQ,GAAA,wDAAA/C,EAAA,WAA+EE,OAAOf,QAAA,aAAqBa,EAAA,UAAekD,YAAA,mBAAAhD,OAAsCoD,KAAA,QAAAW,KAAA,SAA8BtB,IAAKkB,MAAAtB,EAAAoF,kBAA4BpF,EAAAQ,GAAA,4EAAAR,EAAAQ,GAAA,KAAA/C,EAAA,OAA2GkD,YAAA,aAAuBlD,EAAA,OAAAuC,EAAAQ,GAAA,QAAA/C,EAAA,eAA6CE,OAAOqF,MAAAhD,EAAAlE,KAAAL,MAAAwI,UAAAnF,OAAAkB,EAAAlB,OAAA4C,KAAA,SAAoEtB,IAAKmD,YAAAvD,EAAAqF,iBAA8B,GAAArF,EAAAQ,GAAA,KAAA/C,EAAA,OAA4BkD,YAAA,qBAA+BX,EAAAQ,GAAA,QAAA/C,EAAA,eAAmCE,OAAOqF,MAAAhD,EAAAlE,KAAAL,MAAAyI,OAAApF,OAAAkB,EAAAlB,OAAA4C,KAAA,SAAiEtB,IAAKmD,YAAAvD,EAAAsF,cAA2B,GAAAtF,EAAAQ,GAAA,KAAA/C,EAAA,OAA4BkD,YAAA,qBAA+BX,EAAAQ,GAAA,QAAA/C,EAAA,eAAmCE,OAAOqF,MAAAhD,EAAAlE,KAAAL,MAAA0I,GAAArF,OAAAkB,EAAAlB,OAAA4C,KAAA,SAA6DtB,IAAKmD,YAAAvD,EAAAuF,UAAuB,GAAAvF,EAAAQ,GAAA,KAAA/C,EAAA,OAA4BkD,YAAA,qBAA+BX,EAAAQ,GAAA,QAAA/C,EAAA,eAAmCE,OAAOqF,MAAAhD,EAAAlE,KAAAL,MAAA2I,MAAAtF,OAAAkB,EAAAlB,OAAA4C,KAAA,SAAgEtB,IAAKmD,YAAAvD,EAAAwF,aAA0B,OAAAxF,EAAAQ,GAAA,KAAA/C,EAAA,OAAgCkD,YAAA,YAAAhD,OAA+BC,GAAA,cAAiBH,EAAA,OAAYkD,YAAA,cAAwBX,EAAAQ,GAAA,UAAAR,EAAAQ,GAAA,0BAAA/C,EAAA,WAAkEE,OAAOsC,UAAA,MAAArD,QAAA,gBAA0Ca,EAAA,UAAekD,YAAA,mBAAAC,aAA4C6E,MAAA,SAAgB9H,OAAQqF,MAAAhD,EAAAlE,KAAAL,MAAA6I,KAAAoB,YAAA,kBAAAhE,KAAA,QAAAiE,WAAA,IAA2FvF,IAAKmD,YAAAvD,EAAA4F,UAAyB5F,EAAAgB,GAAAhB,EAAA,kBAAA6F,GAAsC,OAAApI,EAAA,UAAoBiD,IAAAmF,EAAA3E,MAAAvD,OAAsBqF,MAAA6C,EAAAvB,QAAmB7G,EAAA,QAAAuC,EAAAQ,GAAAR,EAAAoB,GAAAyE,EAAA/E,SAAAd,EAAAQ,GAAA,KAAA/C,EAAA,QAAgEmD,aAAakF,MAAA,QAAAC,MAAA,UAAgC/F,EAAAQ,GAAAR,EAAAoB,GAAAyE,EAAAnE,eAAgC,GAAA1B,EAAAQ,GAAA,KAAA/C,EAAA,WAAiCE,OAAOf,QAAA,eAAuBa,EAAA,UAAekD,YAAA,mBAAAhD,OAAsCoD,KAAA,QAAAW,KAAA,SAA8BtB,IAAKkB,MAAAtB,EAAAgG,aAAuBhG,EAAAQ,GAAA,YAAAR,EAAAQ,GAAA,KAAA/C,EAAA,gBAAoDE,OAAOoF,MAAA,OAAAC,MAAAhD,EAAAlE,KAAAL,MAAA8I,SAAApB,IAAA,IAAAM,QAAA,UAA4ErD,IAAKkD,MAAAtD,EAAAiG,YAAAzC,SAAA,SAAAjC,GAAoDvB,EAAAkG,aAAAlG,EAAAlE,OAA2B4H,SAAA1D,EAAAmG,kBAA+B,GAAAnG,EAAAQ,GAAA,KAAA/C,EAAA,OAA4BkD,YAAA,YAAAhD,OAA+BC,GAAA,gBAAmBH,EAAA,gBAAqBE,OAAOoF,MAAA,OAAAC,MAAAhD,EAAAlE,KAAAL,MAAA+I,cAAAtB,KAAA,EAAAC,IAAA,GAAAM,QAAA,UAAyFrD,IAAKkD,MAAAtD,EAAAoG,iBAAA5C,SAAA,SAAAjC,GAAyDvB,EAAAkG,aAAAlG,EAAAlE,OAA2B4H,SAAA1D,EAAAqG,sBAAoCrG,EAAAQ,GAAA,KAAA/C,EAAA,gBAAiCE,OAAOoF,MAAA,kBAAuBC,MAAAhD,EAAAlE,KAAAL,MAAAgJ,WAAAtB,IAAA,IAAAM,QAAA,UAAkErD,IAAKkD,MAAAtD,EAAAsG,cAAA9C,SAAA,SAAAjC,GAAsDvB,EAAAkG,aAAAlG,EAAAlE,OAA2B4H,SAAA1D,EAAAuG,mBAAiCvG,EAAAQ,GAAA,KAAA/C,EAAA,gBAAiCE,OAAOoF,MAAA,OAAAC,MAAAhD,EAAAlE,KAAAL,MAAAiJ,SAAAvB,IAAA,IAAAM,QAAA,UAA4ErD,IAAKkD,MAAAtD,EAAAwG,YAAAhD,SAAA,SAAAjC,GAAoDvB,EAAAkG,aAAAlG,EAAAlE,OAA2B4H,SAAA1D,EAAAyG,iBAA+BzG,EAAAQ,GAAA,KAAA/C,EAAA,gBAAiCE,OAAOoF,MAAA,OAAAC,MAAAhD,EAAAlE,KAAAL,MAAAkJ,SAAAxB,IAAA,IAAAM,QAAA,UAA4ErD,IAAKkD,MAAAtD,EAAA0G,YAAAlD,SAAA,SAAAjC,GAAoDvB,EAAAkG,aAAAlG,EAAAlE,OAA2B4H,SAAA1D,EAAA2G,iBAA+B3G,EAAAQ,GAAA,KAAA/C,EAAA,gBAAiCE,OAAOoF,MAAA,OAAAC,MAAAhD,EAAAlE,KAAAL,MAAAmJ,UAAAzB,IAAA,IAAAM,QAAA,UAA6ErD,IAAKkD,MAAAtD,EAAA4G,aAAApD,SAAA,SAAAjC,GAAqDvB,EAAAkG,aAAAlG,EAAAlE,OAA2B4H,SAAA1D,EAAA6G,mBAAgC,GAAA7G,EAAAQ,GAAA,KAAA/C,EAAA,OAA4BkD,YAAA,YAAAhD,OAA+BC,GAAA,eAAkBH,EAAA,OAAYkD,YAAA,cAAwBX,EAAAQ,GAAA,UAAAR,EAAAQ,GAAA,KAAA/C,EAAA,OAAyCkD,YAAA,cAAyBX,EAAAgB,GAAAhB,EAAAlE,KAAA,mBAAAgJ,GAAyC,OAAArH,EAAA,OAAiBiD,IAAAoE,EAAA5D,MAAAP,YAAA,aAAAmG,OAA6CC,WAAAjC,EAAArJ,MAAA0I,GAAA4B,MAAAjB,EAAArJ,MAAAwI,WAAiD7D,IAAMkB,MAAA,SAAAC,GAAyBvB,EAAAgH,SAAAlC,OAAkBrH,EAAA,OAAYkD,YAAA,0BAAoClD,EAAA,WAAgBE,OAAOsC,UAAA,MAAArD,QAAA,YAAsCa,EAAA,OAAY2C,IAAIkB,MAAA,SAAAC,GAAyBA,EAAAC,kBAAyBxB,EAAAiH,SAAAnC,OAAkBrH,EAAA,QAAakD,YAAA,kBAAAhD,OAAqCoD,KAAA,gBAAAW,KAAA,SAAoC,SAAA1B,EAAAQ,GAAA,KAAA/C,EAAA,OAAkCkD,YAAA,uBAAiClD,EAAA,OAAYkD,YAAA,aAAAmG,OAAiCC,WAAAjC,EAAArJ,MAAAyI,OAAAgD,QAAA,OAAAzB,MAAA,MAAA0B,UAAA,YAAkFnH,EAAAQ,GAAAR,EAAAoB,GAAA0D,EAAAhE,kBAA+Bd,EAAAQ,GAAA,KAAA/C,EAAA,OAA2BmD,aAAaC,aAAA,QAAAuG,OAAA,uBAAmD3J,EAAA,WAAgBE,OAAOsC,UAAA,MAAArD,QAAA,iBAA2Ca,EAAA,UAAekD,YAAA,mBAAAhD,OAAsCoD,KAAA,SAAeX,IAAKkB,MAAAtB,EAAAqH,YAAsBrH,EAAAQ,GAAA,eAAAR,EAAAQ,GAAA,KAAA/C,EAAA,WAAkDE,OAAOsC,UAAA,MAAArD,QAAA,mBAA6Ca,EAAA,UAAekD,YAAA,mBAAAhD,OAAsCoD,KAAA,SAAeX,IAAKkB,MAAAtB,EAAAsH,iBAA2BtH,EAAAQ,GAAA,YAAAR,EAAAQ,GAAA,KAAA/C,EAAA,UAA8CkD,YAAA,mBAAAhD,OAAsCoD,KAAA,WAAiBX,IAAKkB,MAAA,SAAAC,GAAyBvB,EAAAmF,YAAA,MAAuBnF,EAAAQ,GAAA,qBAE30K3C,oBCCjB,IAuBA0J,EAvBAlM,EAAA,OAcAmM,CACA1D,EACAmB,GATA,EAVA,SAAAjH,GACA3C,EAAA,SAaA,kBAEA,MAUA,QCjBAoM,+CAEA,4CAGA,aACA,qBAEAzI,oCA6FA,SAAAnD,iDAEA6D,uCACAA,uDAEAgB,oBACA,aACA,wDACAgH,+EACAC,mDACAC,iBApGAjM,oCACAkM,yCA4DA,IAAAhM,mCAxDA6L,6CAEAA,SAsDA7L,EArDAF,iBAuDA,sEAEA,wBACAmM,mBAEAC,SACA,gBAEAC,WAKA,SAAAnM,eAEA,+CACA,8BAEAA,KAxEAF,wDAIA+L,qDAGAtJ,qDAGA,0CAEAA,yCACAG,2CACA0J,6EAGA5G,sFAKAY,8EAIAyF,8DAGA/L,qCAGAA,gEAGAA,uCAIAA,kBACAiM,EADAjM,KAEA+L,gCAEA,oDAJA/L,iBAKA+L,uBAEA,oFAPA/L,UAoCA,SAAAuM,EAAArM,4BAEA+L,4DACAA,eC3GA,IAGAO,GADiB7K,OAFjB,WAA0B,IAAA0C,EAAArE,KAAa4B,EAAAyC,EAAAxC,eAA0BC,EAAAuC,EAAAtC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBqJ,OAAQC,WAAA/G,EAAAlE,KAAAL,MAAAyI,OAAA6B,MAAA/F,EAAAlE,KAAAL,MAAAwI,UAAAM,SAAAvE,EAAAlE,KAAAL,MAAA8I,SAAA,IAAAE,WAAAzE,EAAAlE,KAAAL,MAAAgJ,WAAA,IAAAD,cAAAxE,EAAAlE,KAAAL,MAAA+I,cAAA,KAAA4D,YAAApI,EAAAlE,KAAAL,MAAAkJ,SAAA,KAAA0D,aAAArI,EAAAlE,KAAAL,MAAAkJ,SAAA,KAAA2D,WAAAtI,EAAAlE,KAAAL,MAAAiJ,SAAA,KAAA6D,cAAAvI,EAAAlE,KAAAL,MAAAiJ,SAAA,KAAAe,MAAAzF,EAAAlE,KAAAL,MAAAmJ,UAAA5E,EAAAhB,cAAA,QAAibvB,EAAA,MAAWE,OAAOC,GAAA,mBAAsBoC,EAAAQ,GAAAR,EAAAoB,GAAApB,EAAAqB,iBAAArB,EAAAQ,GAAA,KAAA/C,EAAA,KAAyDE,OAAOC,GAAA,aAAgBoC,EAAAQ,GAAAR,EAAAoB,GAAApB,EAAApD,eAE1oBiB,oBCCjB,IAuBA2K,EAvBAnN,EAAA,OAcAoN,CACAhB,EACAU,GATA,EAVA,SAAAnK,GACA3C,EAAA,SAaA,kBAEA,MAUA,QCyFAqN,EAAA,IAAAxK,EAAA1C,SAAAmN,OAAAzK,EAAAe,cAAA2J,KAAAC,MAAAC,IAAA5K,EAEAxC,4BAGAsG,QAAAI,EACAE,YAAAI,EACAjD,aAAAqC,EACAgC,OAAAyD,EAEAE,QAAAe,kDAGAzM,cACA,cACA,kBACA,cACA,OACA2M,iBACA,eAEA,qEAIA,wCACA,yBACA,iCACA,KACA,+BAEA,WAEAK,sDAGA,yCACA,wBACA,sBACAhN,gBACA,0DAGA,yCACA,uBACA,gBACA,8HAoBAiN,gEAGA/G,2CAGA,+DACAA,iCACAgH,8BACAA,0DAGApF,0CAcA6D,wBACA,kBACA,SAEA,eACA,mBACAwB,IAjBAvN,8CAqBA+L,wBACA,kBACA,4BACA,eACA,mBACAyB,IAtBAxN,SCxMA,IAGAyN,GADiB9L,OAFjB,WAA0B,IAAA0C,EAAArE,KAAa4B,EAAAyC,EAAAxC,eAA0BC,EAAAuC,EAAAtC,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBqJ,OAAQC,WAAA/G,EAAAlE,KAAAL,MAAA0I,GAAAkF,WAAArJ,EAAAlE,KAAAL,MAAA6I,MAA+D3G,OAASC,GAAA,YAAeH,EAAA,OAAYqJ,OAAQC,WAAA/G,EAAAlE,KAAAL,MAAA2I,OAAiCzG,OAASC,GAAA,SAAYH,EAAA,OAAYE,OAAOC,GAAA,mBAAsBH,EAAA,OAAYE,OAAOC,GAAA,cAAiBoC,EAAAQ,GAAAR,EAAAoB,GAAApB,EAAAqB,iBAAArB,EAAAQ,GAAA,KAAA/C,EAAA,OAA2DE,OAAOC,GAAA,gBAAmBoC,EAAAQ,GAAA,KAAA/C,EAAA,OAAwBE,OAAOC,GAAA,eAAkBH,EAAA,gBAAqBkD,YAAA,mBAAAhD,OAAsC2L,OAAAtJ,EAAAsJ,OAAA5J,KAAAM,EAAAN,KAAAgI,QAAA1H,EAAA0H,QAAArG,aAAArB,EAAAqB,gBAA2FrB,EAAAQ,GAAA,KAAA/C,EAAA,eAAgCkD,YAAA,mBAAAhD,OAAsC2L,OAAAtJ,EAAAsJ,OAAA5J,KAAAM,EAAAN,KAAAgI,QAAA1H,EAAA0H,SAA0DtH,IAAKmJ,mBAAAvJ,EAAAxB,UAAAgL,aAAAxJ,EAAAyJ,gBAAoEzJ,EAAAQ,GAAA,KAAA/C,EAAA,UAA2BkD,YAAA,mBAAA+I,OAAsC1G,MAAAhD,EAAA,KAAA2J,SAAA,SAAAC,GAA0C5J,EAAAlE,KAAA8N,GAAaC,WAAA,UAAoB7J,EAAAQ,GAAA,KAAA/C,EAAA,WAA4BkD,YAAA,mBAAAhD,OAAsC2L,OAAAtJ,EAAAsJ,OAAA5J,KAAAM,EAAAN,SAAqC,OAAAM,EAAAQ,GAAA,KAAA/C,EAAA,OAAgCE,OAAOC,GAAA,QAAYkM,UAAWC,OAAA,SAAAxI,GAA0B,OAAAvB,EAAAiI,iBAAA1G,OAAsC9D,EAAA,OAAYE,OAAOC,GAAA,iBAAoBH,EAAA,OAAYE,OAAOC,GAAA,QAAYwC,IAAKkB,MAAAtB,EAAA+H,UAAoBtK,EAAA,UAAeE,OAAOC,GAAA,SAAA2C,KAAA,qBAAuC,GAAAP,EAAAQ,GAAA,KAAA/C,EAAA,OAA4BE,OAAOC,GAAA,YAAeH,EAAA,WAAgBE,OAAO2L,OAAAtJ,EAAAsJ,OAAA5J,KAAAM,EAAAN,KAAAgI,QAAA1H,EAAA0H,QAAA5L,KAAAkE,EAAAlE,KAAAkO,SAAAhK,EAAAgK,UAAkG5J,IAAK6J,gBAAAjK,EAAAkK,0BAA8ClK,EAAAQ,GAAA,KAAA/C,EAAA,UAA2BkD,YAAA,8BAAAmG,OAAkDC,WAAA,iBAA4B/G,EAAAQ,GAAA,sCAAAR,EAAAQ,GAAA,KAAA/C,EAAA,OAAqEE,OAAOC,GAAA,SAAawC,IAAKkB,MAAAtB,EAAAgI,UAAoBvK,EAAA,UAAeE,OAAOC,GAAA,SAAA2C,KAAA,wBAA0C,UAE1zD1C,oBCCjB,IAuBAsM,EAvBA9O,EAAA,OAcA+O,CACAC,EACAjB,GATA,EAVA,SAAApL,GACA3C,EAAA,SAaA,kBAEA,MAUA,QCvBAiP,GADiBhN,OAFjB,WAA0B,IAAaC,EAAb5B,KAAa6B,eAA0BC,EAAvC9B,KAAuC+B,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,QAA4BE,OAAO4M,IAAA,MAAU9M,EAAA,QAAakD,YAAA,sBAAAhD,OAAyCoD,KAAA,SAAAW,KAAA,QAAlK/F,KAA+L6E,GAAA,KAAA/C,EAAA,OAA/L9B,KAA+L6E,GAAA,yBAExM3C,oBCCjB,IAuBA2M,EAvBAnP,EAAA,OAcAoP,OCLA,qCDOAH,GATA,EAVA,SAAAtM,GACA3C,EAAA,SAaA,kBAEA,MAUA,QErBAqP,EAAA,QAAIC,IAAIC,EAAA,GAER,IAAAC,EAAA,IAAmBD,EAAA,GACjBE,SAEI/O,KAAM,eACN+E,KAAM,SACNiK,UAAWZ,IAGXpO,KAAM,WACN+E,KAAM,UACNiK,UAAWP,IAGfQ,eAbwB,SAaRC,EAAIC,EAAMC,GAGxB,IAAKA,EAAe,OAAQC,EAAE,EAAGC,EAAE,2BCpBvCC,kCADiBhO,OAFjB,WAA0B,IAAaC,EAAb5B,KAAa6B,eAAkD,OAA/D7B,KAAuC+B,MAAAD,IAAAF,GAAwB,UAAoBoD,YAAA,UAAAhD,OAA6BoD,KAAA,QAAAwK,MAAA,SAAAhL,KAAhH5E,KAAgH4E,MAAgDH,IAAKkB,MAArK3F,KAAqK2F,UAE9KzD,qBCqBjB2N,EAvBAnQ,EAAA,OAcAoQ,SCPA,sDAGA5H,MDMAyH,GATA,EAEA,KAEA,KAEA,MAUA,QENAZ,EAAA,QAAIK,UAAU,SAAUS,GAExBd,EAAA,QAAIgB,OAAOC,eAAgB,EAC3BjB,EAAA,QAAIC,IAAIiB,EAAAC,GAGR3N,EAAGC,IAAM,IAAIuM,EAAA,QAGb,IAAIA,EAAA,SACFoB,GAAI,OACJjB,SACAkB,YAAcC,IAAAlO,GACdmO,SAAU,+BChBZ,SAAS3M,EAAcwB,EAAMrF,GACzBE,KAAKmF,KAAOA,EACZnF,KAAKF,MAAQA,EAGjB,IAAMwD,GACFmF,MAAO,UACPD,GAAI,UACJD,OAAQ,OACRD,UAAW,UACXK,KAAM,GACNC,SAAU,IACVE,WAAY,IACZE,SAAU,GACVD,SAAU,GACVF,cAAe,EACfI,UAAW,KAGT1F,GACFkF,MAAO,UACPD,GAAI,UACJD,OAAQ,UACRD,UAAW,UACXK,KAAM,gBACNC,SAAU,IACVE,WAAY,IACZE,SAAU,GACVD,SAAU,GACVF,cAAe,EACfI,UAAW,KAGTzF,GACFiF,MAAO,UACPD,GAAI,UACJD,OAAQ,UACRD,UAAW,UACXK,KAAM,sBACNC,SAAU,IACVE,WAAY,IACZE,SAAU,GACVD,SAAU,GACVF,cAAe,EACfI,UAAW,KAGTxF,GACFgF,MAAO,UACPD,GAAI,UACJD,OAAQ,UACRD,UAAW,UACXK,KAAM,gBACNC,SAAU,IACVE,WAAY,IACZE,SAAU,GACVD,SAAU,GACVF,cAAe,EACfI,UAAW,KAGTvF,GACF+E,MAAO,UACPD,GAAI,UACJD,OAAQ,UACRD,UAAW,UACXK,KAAM,gBACNC,SAAU,IACVE,WAAY,IACZE,SAAU,GACVD,SAAU,GACVF,cAAe,EACfI,UAAW,KAGfrJ,EAAQwD,WAEH+B,KAAM,OAAQwD,KAAM,gBAAiB5C,KAAM,SAC3CZ,KAAM,SAAUwD,KAAM,yBAA0B5C,KAAM,SACtDZ,KAAM,SAAUwD,KAAM,qBAAsB5C,KAAM,SAClDZ,KAAM,QAASwD,KAAM,qBAAsB5C,KAAM,SACjDZ,KAAM,OAAQwD,KAAM,sBAAuB5C,KAAM,QACjDZ,KAAM,YAAawD,KAAM,mBAAoB5C,KAAM,SACnDZ,KAAM,YAAawD,KAAM,mBAAoB5C,KAAM,QACnDZ,KAAM,OAAQwD,KAAM,kBAAmB5C,KAAM,SAC7CZ,KAAM,QAASwD,KAAM,kBAAmB5C,KAAM,SAC9CZ,KAAM,OAAQwD,KAAM,gBAAiB5C,KAAM,SAG3CZ,KAAM,SAAUwD,KAAM,0BAA2B5C,KAAM,SACvDZ,KAAM,SAAUwD,KAAM,yBAA0B5C,KAAM,SAItDZ,KAAM,OAAQwD,KAAM,gBAAiB5C,KAAM,SAC3CZ,KAAM,OAAQwD,KAAM,gBAAiB5C,KAAM,SAC3CZ,KAAM,OAAQwD,KAAM,kBAAmB5C,KAAM,SAG7CZ,KAAM,SAAUwD,KAAM,qBAAsB5C,KAAM,SAGvD,IAAMwK,EAAuB,IAAI5M,EAAc,UAAWL,GACpDkN,EAAoB,IAAI7M,EAAc,OAAQJ,GAC9CkN,EAAqB,IAAI9M,EAAc,SAAUH,GACjDkN,EAAqB,IAAI/M,EAAc,QAASF,GAElD1D,GACAwQ,EAFsB,IAAI5M,EAAc,OAAQD,GAIhDgN,EACAD,EACAD,GAGJ5Q,EAAQE,MAjIR,SAAe2I,EAAOD,EAAID,EAAQD,EAAWK,EAAMC,EAAUE,EAAYE,EAAUD,EAAUF,EAAeI,GACxGjJ,KAAKyI,MAAQA,EACbzI,KAAKwI,GAAKA,EACVxI,KAAKuI,OAASA,EACdvI,KAAKsI,UAAYA,EACjBtI,KAAK2I,KAAOA,EACZ3I,KAAK4I,SAAWA,EAChB5I,KAAK8I,WAAaA,EAClB9I,KAAKgJ,SAAWA,EAChBhJ,KAAK+I,SAAWA,EAChB/I,KAAK2Q,cAAgB9H,EACrB7I,KAAKiJ,UAAYA,GAwHrBrJ,EAAQ0D,aAAeA,EACvB1D,EAAQ2D,UAAYA,EACpB3D,EAAQ4D,WAAaA,EACrB5D,EAAQ6D,WAAaA,EACrB7D,EAAQ8D,UAAYA,EAEpB9D,EAAQG,UAAYA,EACpBH,EAAQ+D,cAAgBA,EACxB/D,EAAQuD,QAAU,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,UAAW,QACrHvD,EAAQyD,cAAgB,wBC1IxB,IAAI5D,EAAQC,EAAQ,QAChBC,EAAOD,EAAQ,QAcnB,SAAS+C,EAAmBvC,GAExB,OAGJ,SAAkCA,EAAM6L,GACpC,IAAI7H,EAAI6H,EAAQ6E,QAAQ,QAAS,IACjC,IAAK1Q,EAAKmO,SAAU,OACpB,IAAI3I,EAAexF,EAAKmO,SAASwC,SAAS3M,GAAG,GAAG4C,KAEhD,OADApB,EAAeA,EAAakL,QAAQ,QAAS,IAPtCE,CAAyB5Q,EADlBA,EAAK6L,SAmIvB,SAAS9I,EAAkB/C,GACvB,IAAIW,EAAO,MAAQX,EAAK6Q,SAASC,MACjCnQ,GAAQ,cAAgBX,EAAK6Q,SAASE,SACtCpQ,GAAQ,gBAAkBX,EAAK6Q,SAASG,QACxChR,EAAKiR,OAAOtQ,MACRuG,MAAOlH,EAAK6Q,SAASK,KACrBnQ,QAASJ,EACTG,UAAU,IAvJlBpB,EAAQ6C,mBAAqBA,EAC7B7C,EAAQ8C,aAyBR,SAAsBqB,EAAMgI,EAASrG,EAAc2L,EAAWC,EAAWC,GACrEvR,KAAK+E,IAAM,gBAAkBhB,EAC7B/D,KAAKiC,GAAK+J,OAAOwF,WACjBxR,KAAK+D,KAAOA,EACZ/D,KAAK+L,QAAUA,EACf/L,KAAK0F,aAAeA,EACpB1F,KAAKqR,UAAYA,EACjBrR,KAAKsR,UAAYA,EACjBtR,KAAKuR,SAAWA,EAChBvR,KAAKgG,QAAUqL,EAAUC,GAjC7B1R,EAAQ+C,mBAuCR,SAA4BzC,EAAM+L,GAC9B,IAAIjI,EAAKiI,EACLkE,EAAKsB,SAASC,eAAe,QAC7B3F,EAAU7L,EAAK6L,QASnB,OARA/H,EAAG+H,QAAUA,EACb/H,EAAG0B,aAAexF,EAAKwF,aACvB1B,EAAGqN,UAAYlB,EAAGkB,UAClBrN,EAAGsN,UAAYnB,EAAGwB,aAAcxB,EAAGwB,aAAcxB,EAAGyB,aAAazB,EAAG0B,aACpE7N,EAAGuN,SAAW,IAAIvF,KAClBhI,EAAGkC,YAAclC,EAAGuN,SAASO,qBAAuB9N,EAAGuN,SAASQ,qBAChE/N,EAAGgC,SAAWhC,EAAGqN,UAAUrN,EAAGsN,WAAWrL,QAAQ,GAE1CjC,GAlDXpE,EAAQgD,sBAqDR,SAA+B1C,GAC3B,IAAI6L,EAAU7L,EAAK6L,QACfuB,SACkCA,EAAtCpN,EAAK+L,aAAaF,SAAWA,EAAa7L,EAAK+L,aAAaoF,UAAe,EAC3E,IAAIW,EAAIP,SAASC,eAAe,QAChCpR,QAAQC,IAAI,0BAA4B+M,GACxC0E,EAAEX,UAAY/D,GA1DlB1N,EAAQiD,UAiER,SAAmB3C,EAAMyN,EAAQ5J,EAAMgI,GACnC,IAAIuB,EAAI,SAAWK,EAAS,IAAM5J,EAAO,IAAMgI,EAC/CzL,QAAQC,IAAI,cAAgB+M,GAC5BpN,EAAK+R,QAAQC,MAAO9R,KAAM2L,KAnE9BnM,EAAQkD,oBAuER,SAA6B5C,EAAMyN,EAAQ5J,EAAMgI,GAC7C7L,EAAKU,SAASuR,SACVlR,QAAS,UACTF,SAAU,IAGd,IAAIqR,EAAazS,EAAKyS,WAAWzE,EAAQ5J,EAAMgI,GAC/CzL,QAAQC,IAAI,wBAA0B6R,GACtC3S,EAAM6B,IAAI8Q,GAAY3R,KAAK,SAASc,GAChCrB,EAAKU,SAASyR,UACdnS,EAAKe,QAAUM,EAASZ,OACzBO,MAAM,SAASJ,GACdZ,EAAKU,SAASyR,UACd/R,QAAQC,IAAIO,GACZ,IAAIwR,EAAS,cAAgBF,EAAa,OAC1CE,GAAU,QAAUxR,EACpBZ,EAAKiR,OAAOrQ,OACRsG,MAAO,SACPnG,QAASqR,OAxFrB1S,EAAQmD,cA6FR,SAAuB7C,EAAMyN,EAAQ5J,GACjC,IAAIwO,EAAa5S,EAAK4S,WAAW5E,EAAQ5J,GACzCzD,QAAQC,IAAI,4BAA8BgS,GAE1C9S,EAAM6B,IAAIiR,GAAY9R,KAAK,SAASc,IAWxC,SAAuBiR,EAAatS,GAChC,IAAIuS,EAAMD,EAAYE,MAAM,MAE5BxS,EAAKmO,YACL,IAAK,IAAInK,EAAI,EAAGA,EAAIuO,EAAIE,OAAQzO,IAC5B,GAAc,IAAVuO,EAAIvO,GAAR,CAGA,IAAIgG,GAAQ/E,KAAM,GAAI2B,KAAM,IAC5BoD,EAAK/E,KAAQjB,EAAE,EAAK,OACpBgG,EAAKpD,KAAQ5C,EAAE,EAAI,KAAOuO,EAAIvO,GAC9BhE,EAAKmO,SAAS6D,KAAKhI,IArBnB0I,CAAcrR,EAASZ,KAAMT,GAC7BA,EAAKwF,aAAejD,EAAmBvC,GACvC,IAAIiJ,EAAIsI,SAASoB,qBAAqB,SAAS,GAC/C1J,EAAEhC,UAAYjH,EAAK6D,KACnB7D,EAAK4S,MAAM,eAAgB5S,EAAKmO,YACjCnN,MAAM,SAASJ,GACdR,QAAQC,IAAIO,MAvGpBlB,EAAQoD,cA0HR,SAAuB9C,EAAMyN,EAAQ5J,GACjC,IAAIgP,EAAWpT,EAAKqT,YAAYrF,EAAQ5J,GACxCtE,EAAM6B,IAAIyR,GAAUtS,KAAK,SAASC,GACZ,KAAdA,EAAIc,QAIRlB,QAAQC,IAAIG,EAAIC,MAChBT,EAAK6Q,SAAWrQ,EAAIC,KACpBsC,EAAkB/C,IALdA,EAAKU,SAASE,MAAM,aAAeJ,EAAIc,UAM5CN,MAAM,SAASC,GACdjB,EAAKU,SAASE,MAAM,aAAeK,MApI3CvB,EAAQqD,kBAAoBA,EAC5BrD,EAAQsD,aAkJR,SAAsByK,EAAQ5J,GAC1B,IAAImM,EAAIuB,SAASwB,cAAc,KAC/B/C,EAAEgD,KAAOvT,EAAKwT,gBAAgBxF,EAAQ5J,GACtCmM,EAAEkD,SAAWrP,EAEb0N,SAAS4B,KAAKC,YAAYpD,GAE1BA,EAAEvK,QACF8L,SAAS4B,KAAKE,YAAYrD,6CCvK9B,IAAMsD,EAAW,uBAGXC,EAAe,+BAMrB,SAASrB,EAAWzE,EAAQ5J,EAAMgI,GAC9B,OAAOqG,EAAaoB,EAAW,IAAM7F,EAAS,IAAM5J,EAAO,IAAMgI,EAmBrEnM,EAAQyB,WA5BW,+BA6BnBzB,EAAQS,YA5BY,4BA6BpBT,EAAQ2S,WA1BR,SAAoB5E,EAAQ5J,GACxB,OAAOyP,EAAW7F,EAAS5J,EAAO,gBA0BtCnE,EAAQwS,WAAaA,EACrBxS,EAAQoT,YApBR,SAAqBrF,EAAQ5J,GACzB,OAAOgP,SAAWS,EAAW,IAAM7F,EAAS5J,EAAO,aAoBvDnE,EAAQuT,gBAjBR,SAAyBxF,EAAQ5J,GAC7B,OAAOyP,EAAW,IAAM7F,EAAS,IAAM5J,EAAO,cAAgBA,GAiBlEnE,EAAQgE,eAdR,SAAwB+J,EAAQ5J,GAC5B,OAAO0P,EAAeC,mBAAmB/F,EAAS5J,IActDnE,EAAQiE,gBAXR,SAAyB8J,EAAQ5J,GAC7B,MAAO,uCAAyC2P,mBAAmB/F,EAAS5J","file":"static/js/app.82c5e79cbd7f801f9e49.js","sourcesContent":["var axios = require('axios');\r\nvar bapi = require('./backendAPI');\r\n\r\nexports.userConf = userConf;\r\nexports.saveUserConf = saveUserConf;\r\nexports.getUserConf = getUserConf;\r\n\r\n\r\nfunction userConf(theme, themeList) {\r\n    this.theme = theme;\r\n    this.themeList = themeList;\r\n}\r\n\r\nfunction saveUserConf(self, conf){\r\n    path = bapi.saveConfUrl;\r\n    console.log(\"saveUserConf: \" + path);\r\n    axios.post(path, conf).then(function(res){\r\n        console.log(res)\r\n        if (res.data == null || res.data == \"\") {\r\n            self.$Message.info(\"保存成功\");\r\n        } else {\r\n            self.$Message.error({duration: 3, closable: true, content: \"保存出错: \" + res.data});\r\n        }\r\n    }).catch(function(err){\r\n        console.log(err);\r\n        self.$Message.error({duration: 3, closable: true, content: \"连接出错: \" + err});\r\n    });\r\n}\r\n\r\nfunction getUserConf(self){\r\n    console.log(\"get user conf: \" + bapi.getConfUrl);\r\n    //printUserConf(self);\r\n    axios.get(bapi.getConfUrl).then(function(response){\r\n        if (response.status != 200) {\r\n            self.$Message.warning({duration: 15, closable: true, content: \"then: 同步服务端配置到本地出错：\" + response.status});\r\n            return;\r\n        }\r\n\r\n        if (!response.data) {\r\n            self.$Message.info(\"服务端没有配置\");\r\n            return;\r\n        }\r\n\r\n        let conf = response.data;\r\n        self.theme = conf.theme;\r\n        self.themeList = conf.themeList;\r\n        //self.$Message.info(\"服务端配置已同步到本地\");\r\n    }).catch(function(error){\r\n        self.$Message.error({duration: 15, closable: true, content: \"同步服务端配置到本地失败: \" + error});\r\n    });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/common/js/conf.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-36c2f5ea\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-36c2f5ea\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-36c2f5ea\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App'\n}\n</script>\n\n<style>\n#app {\n  \n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  font-family: \"Helvetica Neue\",Helvetica,\"PingFang SC\",\"Hiragino Sans GB\",\"Microsoft YaHei\",\"微软雅黑\",Arial,sans-serif;\n \n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n}\n\n.ivu-select-dropdown{\n  max-height: 80vh !important;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var caption = require('./caption');\r\nvar theme = require('./theme');\r\nvar conf = require('./conf');\r\nvar bapi = require('./backendAPI');\r\n\r\nexport default {\r\n    // 全局通信总线，在 main.js 中初始化为 vue 示例，通过 vue 事件进行通信\r\n    bus: null,\r\n\r\n    // caption\r\n    getCaptionTitleCur: caption.getCaptionTitleCur,\r\n    ReadPosition: caption.ReadPosition,\r\n    updateReadPosition: caption.updateReadPosition,\r\n    setReadPositionScroll: caption.setReadPositionScroll,\r\n    goCaption: caption.goCaption,\r\n    fetchCaptionContent: caption.fetchCaptionContent,\r\n    fetchCatalogs: caption.fetchCatalogs,\r\n    fetchBookInfo: caption.fetchBookInfo,\r\n    showBookInfoModal: caption.showBookInfoModal,\r\n    downloadBook: caption.downloadBook,\r\n\r\n    // theme\r\n    theme: theme.theme,\r\n\r\n    colors: theme.colors,\r\n    fontList: theme.fontList,\r\n    basePageWidth: theme.basePageWidth,\r\n\r\n    defaultTheme: theme.defaultTheme,\r\n    darkTheme: theme.darkTheme,\r\n    yelloTheme: theme.yelloTheme,\r\n    greenTheme: theme.greenTheme,\r\n    pinkTheme: theme.pinkTheme,\r\n\r\n    themeListItem: theme.themeListItem,\r\n    themeList: theme.themeList,\r\n\r\n    // user config\r\n    userConf: conf.userConf,\r\n    saveUserConf: conf.saveUserConf,\r\n    getUserConf: conf.getUserConf,\r\n\r\n    // backend api\r\n    getBookmarkUrl: bapi.getBookmarkUrl,\r\n    saveBookmarkUrl: bapi.saveBookmarkUrl,\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/common/js/index.js","<template>\r\n<Dropdown placement=\"bottom-end\" trigger=\"click\" transfer @on-click=\"clickBookmark\">\r\n    <AppBtn icon=\"bookmark\" />\r\n    <DropdownMenu slot=\"list\">\r\n        <DropdownItem class=\"bookmark-item\" style=\"text-align: center\" name=\"newMark\" key=\"newMarkKey\"><Icon type=\"android-add\" />&ensp;添加书签</DropdownItem>\r\n        <DropdownItem class=\"bookmark-item\" divided v-for=\"mark in bookmarks\" :name=\"mark.id\" :key=\"mark.index\">\r\n            <div class=\"bookmark-hdr\">\r\n                <div class=\"bookmark-title\">章节：{{ mark.captionTitle }}</div>\r\n                <div @click.stop=\"delBookMark(mark.id)\"><Icon type=\"close-circled\" size=\"15\" class=\"bookmark-close-btn\"/></div>\r\n            </div>\r\n            <p>位置：{{ (mark.percent * 100).toFixed(2) }}%</p>\r\n            <p>创建时间：{{ mark.saveTimeStr }}</p>\r\n        </DropdownItem>\r\n    </DropdownMenu>\r\n</Dropdown>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport cm from '../common/js'\r\n\r\n/* let bookmarkRoot = '/static/cache/txt/bookmarks/'; */\r\n\r\nexport default {\r\n    props: ['relDir', 'file', 'caption', 'captionTitle', 'readPosition'],\r\n    data () {\r\n        return {\r\n            bookmarks: [],\r\n        }\r\n    },\r\n    created () {\r\n        getBookmarks(this);\r\n    },\r\n    watch: {\r\n        bookmarks () {\r\n            updateServerBookmarks(this);\r\n        },\r\n    },\r\n    methods: {\r\n        clickBookmark (markId) {\r\n            if (markId == \"newMark\") {\r\n                newBookmark(this);\r\n            } else {\r\n                goBookmark(this, markId);\r\n            }\r\n        },\r\n        delBookMark (markId) {\r\n            console.log(\"delBookMark\");\r\n            delBookMark(this, markId);\r\n        },\r\n    },\r\n}\r\n\r\nfunction getBookmarks(self){\r\n    console.log(\"getBookmarks\");\r\n    let getBookmarksPath = cm.getBookmarkUrl(self.relDir, self.file);\r\n    axios.get(getBookmarksPath).then(function(res){\r\n        if (!res.data) return;\r\n        self.bookmarks = res.data;\r\n        //self.$Message.success(\"服务端书签已同步到本地\");\r\n    }).catch(function(error){\r\n        console.log(\"获取书签: \" + error)\r\n    });\r\n}\r\n\r\nfunction updateServerBookmarks(self){\r\n    console.log(\"updateServerBookmarks\");\r\n    let postBookmarksPath = cm.saveBookmarkUrl(self.relDir, self.file);\r\n    axios.post(postBookmarksPath, self.bookmarks).then(function(res){\r\n        if (res.data == \"\" || res.data == null){\r\n            //self.$Message.success(\"书签同步成功\");\r\n        } else {\r\n            self.$Message.error({duration: 3, content: \"保存书签到服务端失败：\" + res.data});\r\n        }\r\n    }).catch(function(err){\r\n         self.$Message.error({duration: 3, content: \"保存书签到服务端失败：\" + err});\r\n    });\r\n}\r\n\r\nfunction newBookmark (self) {\r\n    let rp = new cm.ReadPosition(self.file);\r\n    cm.updateReadPosition(self, rp);\r\n    self.bookmarks.push(rp);\r\n}\r\n\r\nfunction goBookmark (self, markId) {\r\n    let rp;\r\n    for (let i = 0; i < self.bookmarks.length; i++){\r\n        if (self.bookmarks[i].id == markId) {\r\n            rp = Object.assign({}, self.bookmarks[i]);\r\n            break;\r\n        }\r\n    }\r\n\r\n    cm.bus.$emit('goBookmarkEv', rp);\r\n}\r\n\r\nfunction delBookMark(self, markId) {\r\n    let index = getBookmarkIndexById(self.bookmarks, markId);\r\n    if (index == undefined) {\r\n        self.$Message.error(\"找不到要删除的书签\");\r\n        return;\r\n    }\r\n    if (!self.bookmarks.splice(index, 1)) {\r\n        self.$Message.error(\"删除失败\");\r\n        return;\r\n    }\r\n}\r\nfunction getBookmarkIndexById(bookmarks, markId){\r\n    for (let i = 0; i < bookmarks.length; i++){\r\n        if (bookmarks[i].id == markId) {\r\n            return i;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .bookmark-item{\r\n        width: 250px;\r\n        text-align: left;\r\n        overflow-x: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n    .bookmark-hdr{\r\n        display: flex;\r\n        justify-content: space-between;\r\n    }\r\n    .bookmark-close-btn{\r\n        margin-right: 0px;\r\n        margin-top: 0px;\r\n        cursor: pointer;\r\n    }\r\n    .bookmark-title{\r\n        flex-grow: 1;\r\n        text-overflow: ellipsis;\r\n        overflow: hidden;\r\n    }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/hdr/HdrBookmarks.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Dropdown',{attrs:{\"placement\":\"bottom-end\",\"trigger\":\"click\",\"transfer\":\"\"},on:{\"on-click\":_vm.clickBookmark}},[_c('AppBtn',{attrs:{\"icon\":\"bookmark\"}}),_vm._v(\" \"),_c('DropdownMenu',{attrs:{\"slot\":\"list\"},slot:\"list\"},[_c('DropdownItem',{key:\"newMarkKey\",staticClass:\"bookmark-item\",staticStyle:{\"text-align\":\"center\"},attrs:{\"name\":\"newMark\"}},[_c('Icon',{attrs:{\"type\":\"android-add\"}}),_vm._v(\" 添加书签\")],1),_vm._v(\" \"),_vm._l((_vm.bookmarks),function(mark){return _c('DropdownItem',{key:mark.index,staticClass:\"bookmark-item\",attrs:{\"divided\":\"\",\"name\":mark.id}},[_c('div',{staticClass:\"bookmark-hdr\"},[_c('div',{staticClass:\"bookmark-title\"},[_vm._v(\"章节：\"+_vm._s(mark.captionTitle))]),_vm._v(\" \"),_c('div',{on:{\"click\":function($event){$event.stopPropagation();_vm.delBookMark(mark.id)}}},[_c('Icon',{staticClass:\"bookmark-close-btn\",attrs:{\"type\":\"close-circled\",\"size\":\"15\"}})],1)]),_vm._v(\" \"),_c('p',[_vm._v(\"位置：\"+_vm._s((mark.percent * 100).toFixed(2))+\"%\")]),_vm._v(\" \"),_c('p',[_vm._v(\"创建时间：\"+_vm._s(mark.saveTimeStr))])])})],2)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7a879914\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/hdr/HdrBookmarks.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7a879914\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HdrBookmarks.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./HdrBookmarks.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./HdrBookmarks.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7a879914\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./HdrBookmarks.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7a879914\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/hdr/HdrBookmarks.vue\n// module id = null\n// module chunks = ","<template>\r\n    <Dropdown placement=\"bottom-end\" trigger=\"click\" @on-click=\"hdrMoreHandler\">\r\n        <AppBtn icon=\"ios-more\" />\r\n        <DropdownMenu slot=\"list\">\r\n            <DropdownItem name=\"bookInfo\">书籍信息</DropdownItem>\r\n            <DropdownItem name=\"download\">下&ensp;&ensp;&ensp;&ensp;载</DropdownItem>\r\n            <!-- <DropdownItem name=\"help\">帮&ensp;&ensp;&ensp;&ensp;助</DropdownItem> -->\r\n            <DropdownItem name=\"about\">关&ensp;&ensp;&ensp;&ensp;于</DropdownItem>\r\n        </DropdownMenu>\r\n    </Dropdown>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport cm from '../common/js'\r\n\r\nexport default {\r\n  props: ['relDir', 'file'],\r\n  methods: {\r\n      hdrMoreHandler (val) {\r\n        console.log(\"hdrMoreHandler: \" + val);\r\n        let self = this;\r\n        switch (val) {\r\n            case \"bookInfo\":\r\n                showBookInfo(self);\r\n                break;\r\n            case \"help\":\r\n                showHelp();\r\n                break;\r\n            case \"about\":\r\n                showAbout(self);\r\n                break;\r\n            case \"download\":\r\n                cm.downloadBook(this.relDir, this.file);\r\n                break;\r\n            default:\r\n                console.log(\"unknow name: \" + val);\r\n        }\r\n      },\r\n  },\r\n}\r\n\r\nfunction showBookInfo (self) {\r\n    console.log(\"showBookInfo\");\r\n    if (self.fileInfo) {\r\n        cm.showBookInfoModal(self);\r\n        return;\r\n    }\r\n    cm.fetchBookInfo(self, self.relDir, self.file);\r\n}\r\n\r\nfunction showHelp () {\r\n    console.log(\"showHelp\");\r\n}\r\nfunction showAbout (self) {\r\n    console.log(\"showAbout\");\r\n    self.$Modal.info({\r\n        title: \"Athena TXT Reader\",\r\n        content: \"<a href='https://github.com/Lt0/txt-web' target='_blank'>https://github.com/Lt0/txt-web</a>\",\r\n        closable: true,\r\n    });\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/hdr/HdrMore.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Dropdown',{attrs:{\"placement\":\"bottom-end\",\"trigger\":\"click\"},on:{\"on-click\":_vm.hdrMoreHandler}},[_c('AppBtn',{attrs:{\"icon\":\"ios-more\"}}),_vm._v(\" \"),_c('DropdownMenu',{attrs:{\"slot\":\"list\"},slot:\"list\"},[_c('DropdownItem',{attrs:{\"name\":\"bookInfo\"}},[_vm._v(\"书籍信息\")]),_vm._v(\" \"),_c('DropdownItem',{attrs:{\"name\":\"download\"}},[_vm._v(\"下    载\")]),_vm._v(\" \"),_c('DropdownItem',{attrs:{\"name\":\"about\"}},[_vm._v(\"关    于\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3f5fdc0e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/hdr/HdrMore.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3f5fdc0e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HdrMore.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./HdrMore.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./HdrMore.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3f5fdc0e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./HdrMore.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3f5fdc0e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/hdr/HdrMore.vue\n// module id = null\n// module chunks = ","<template>\r\n<Dropdown id=\"captions\" placement=\"bottom-end\" trigger=\"click\" class=\"app-caption-list\" transfer @on-click=\"goCaption\" >\r\n    <AppBtn icon=\"navicon-round\" />\r\n    <DropdownMenu slot=\"list\">\r\n        <DropdownItem class=\"app-caption-list-item\" v-for=\"catalog in catalogs\" :name=\"catalog.name\" :key=\"catalog.index\">{{ catalog.text }}</DropdownItem>\r\n    </DropdownMenu>\r\n</Dropdown>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport cm from '../common/js'\r\n\r\nexport default {\r\n    props: ['relDir', 'file', 'caption'],\r\n    data () {\r\n        return {\r\n            catalogs: null,\r\n        }\r\n    },\r\n    created () {\r\n        this.fetchCatalogs();\r\n    },\r\n    methods: {\r\n        fetchCatalogs () {\r\n            cm.fetchCatalogs(this, this.relDir, this.file);\r\n        }, \r\n        goCaption (val) {\r\n            console.log(\"goCaption in HdrCatalogs component: \" + val);\r\n            this.$emit('goCaptionByCatalog', val)\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/hdr/HdrCatalogs.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Dropdown',{staticClass:\"app-caption-list\",attrs:{\"id\":\"captions\",\"placement\":\"bottom-end\",\"trigger\":\"click\",\"transfer\":\"\"},on:{\"on-click\":_vm.goCaption}},[_c('AppBtn',{attrs:{\"icon\":\"navicon-round\"}}),_vm._v(\" \"),_c('DropdownMenu',{attrs:{\"slot\":\"list\"},slot:\"list\"},_vm._l((_vm.catalogs),function(catalog){return _c('DropdownItem',{key:catalog.index,staticClass:\"app-caption-list-item\",attrs:{\"name\":catalog.name}},[_vm._v(_vm._s(catalog.text))])}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-37d3516e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/hdr/HdrCatalogs.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-37d3516e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HdrCatalogs.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./HdrCatalogs.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./HdrCatalogs.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-37d3516e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./HdrCatalogs.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-37d3516e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/hdr/HdrCatalogs.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"set-item\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.title)}}),_vm._v(\" \"),_c('div',{staticClass:\"slider app-btn-gutter-l\"},[_c('Slider',{attrs:{\"value\":_vm.value,\"show-input\":\"\",\"min\":_vm.min,\"max\":_vm.max},on:{\"input\":_vm.input,\"on-input\":_vm.slide,\"on-change\":_vm.slideEnd}})],1),_vm._v(\" \"),_c('Tooltip',{attrs:{\"placement\":\"top\",\"content\":_vm.btnTips}},[_c('Button',{staticClass:\"app-btn-gutter-l\",attrs:{\"type\":\"ghost\"},on:{\"click\":_vm.clickBtn}},[_vm._v(\"\\n            默认\\n        \")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c75b2ff4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/common/SetSlideItem.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c75b2ff4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SetSlideItem.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SetSlideItem.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SetSlideItem.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c75b2ff4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./SetSlideItem.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c75b2ff4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/common/SetSlideItem.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div class=\"set-item\">\r\n        <div v-html=\"title\"></div>\r\n        <div class=\"slider app-btn-gutter-l\">\r\n            <Slider :value=\"value\" @input=\"input\" show-input :min=\"min\" :max=\"max\" @on-input=\"slide\" @on-change=\"slideEnd\"></Slider>\r\n        </div>\r\n        <Tooltip placement=\"top\" :content=\"btnTips\">\r\n            <Button type=\"ghost\" class=\"app-btn-gutter-l\" @click=\"clickBtn\">\r\n                默认\r\n            </Button>\r\n        </Tooltip>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// 使用说明\r\n// 示例：<SetSlideItem title='文字间隔' v-model=\"theme.letterSpacing\" :min=\"-2\" :max=\"20\" @changeSlide=\"setEvHandler\" btnTips=\"应用的默认值\" @clickBtn=\"theme.letterSpacing=defaultTheme.letterSpacing; setEvHandler();\" />\r\n// [:]title: 设置项最左边显示的名字\r\n// v-model: 双向绑定的变量\r\n// :min: 滑块的最小值\r\n// :max: 滑块的最大值\r\n// @slide: 滑块滑动过程中不断触发的事件\r\n// @slideEnd: 滑块操作结束后触发的事件\r\n\r\n// btnTips: 默认按钮的 Tooltips 说明\r\n// @clickBtn: 点击默认按钮触发的事件\r\n\r\n\r\nexport default {\r\n    //[:]value: 滑块的值， v-model 所配置的值会以 value 的变量名传递进来当前组件\r\n    props: ['title', 'value', 'min', 'max', 'btnTips'],\r\n\r\n    methods: {\r\n        input (arg) {\r\n            this.$emit('input', arg);\r\n        },\r\n        slide (arg) {\r\n            this.$emit('slide', arg);\r\n        },\r\n        slideEnd (arg) {\r\n            this.$emit('slideEnd', arg);\r\n        },\r\n        clickBtn (arg) {\r\n            this.$emit('clickBtn', arg);\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .set-item{\r\n        display: flex;\r\n\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n    .set-title{\r\n        padding-bottom: 16px;\r\n    }\r\n    .set-item .slider{\r\n        flex-grow: 1;\r\n    }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/common/SetSlideItem.vue","<template>\r\n<Dropdown id=\"setting\" placement=\"bottom-end\" trigger=\"custom\" transfer :visible=\"setVisible\">\r\n    <AppBtn icon=\"ios-gear\" @click=\"setVisible = !setVisible\" />\r\n    <DropdownMenu slot=\"list\">\r\n        <div id=\"setArea\">\r\n            <div id=\"set-color\" class=\"set-group\">\r\n                <div class=\"set-title\">\r\n                    颜色设置\r\n                    <Tooltip content=\"使用默认主题色\">\r\n                        <Button type=\"ghost\" size=\"small\" class=\"app-btn-gutter-l\" @click=\"resetAllColors\">\r\n                            默认\r\n                        </Button>\r\n                    </Tooltip>\r\n                </div>\r\n                <div class=\"set-item\">\r\n                    <div>文字: <ColorPicker :value=\"conf.theme.fontColor\" :colors=\"colors\" size=\"small\" @on-change=\"setFontColor\" /></div>\r\n                    <div class=\"app-btn-gutter-l\">纸张: <ColorPicker :value=\"conf.theme.fontBg\" :colors=\"colors\" size=\"small\" @on-change=\"setFontBg\" /></div>\r\n                    <div class=\"app-btn-gutter-l\">背景: <ColorPicker :value=\"conf.theme.bg\" :colors=\"colors\" size=\"small\" @on-change=\"setBg\" /></div>\r\n                    <div class=\"app-btn-gutter-l\">页首: <ColorPicker :value=\"conf.theme.hdrBg\" :colors=\"colors\" size=\"small\" @on-change=\"setHdrBg\" /></div>\r\n                </div>\r\n            </div>\r\n\r\n            <div id=\"set-font\" class=\"set-group\">\r\n                <div class=\"set-title\">字体设置</div>字体\r\n                <Tooltip placement=\"top\" content=\"首次设置需要下载字体\">\r\n                    <Select :value=\"conf.theme.font\" placeholder=conf.theme.font size=\"small\" filterable style=\"width:180px\" class=\"app-btn-gutter-l\" @on-change=\"setFont\">\r\n                        <Option v-for=\"item in fontList\" :value=\"item.font\" :key=\"item.index\">\r\n                            <span>{{ item.name }}</span>\r\n                            <span style=\"float:right;color:#ccc\">{{item.size}}</span>\r\n                        </Option>\r\n                    </Select>\r\n                </Tooltip>\r\n                <!-- 如果已设置过字体，点击默认是会触发 select 的 on-change 事件，这里不需要再绑定 on-change 事件 -->\r\n                <Tooltip content=\"使用浏览器默认字体\"><Button type=\"ghost\" size=\"small\" class=\"app-btn-gutter-l\" @click=\"resetFont\">默认</Button> </Tooltip>\r\n                <SetSlideItem title='字体大小' :value=\"conf.theme.fontSize\" :max=\"300\" @slide=\"setFontSize\" @slideEnd=\"setEvHandler(conf)\" btnTips=\"应用的默认值\" @clickBtn=\"resetFontSize\" />\r\n            </div>\r\n\r\n            <div id=\"set-gutter\" class=\"set-group\">\r\n                <SetSlideItem title='文字间隔' :value=\"conf.theme.letterSpacing\" :min=\"-2\" :max=\"20\" @slide=\"setLetterSpacing\" @slideEnd=\"setEvHandler(conf)\" btnTips=\"应用的默认值\" @clickBtn=\"resetLetterSpacing\" />\r\n                <SetSlideItem title='行&ensp;间&ensp;距' :value=\"conf.theme.lineHeight\" :max=\"500\" @slide=\"setLineHeight\" @slideEnd=\"setEvHandler(conf)\" btnTips=\"应用的默认值\" @clickBtn=\"resetLineHeight\" />\r\n                <SetSlideItem title='上下边距' :value=\"conf.theme.hPadding\" :max=\"300\" @slide=\"setHPadding\" @slideEnd=\"setEvHandler(conf)\" btnTips=\"应用的默认值\" @clickBtn=\"resetHPadding\" />\r\n                <SetSlideItem title='左右边距' :value=\"conf.theme.vPadding\" :max=\"300\" @slide=\"setVPadding\" @slideEnd=\"setEvHandler(conf)\" btnTips=\"应用的默认值\" @clickBtn=\"resetVPadding\" />\r\n                <SetSlideItem title='纸张大小' :value=\"conf.theme.pageWidth\" :max=\"500\" @slide=\"setPageWidth\" @slideEnd=\"setEvHandler(conf)\" btnTips=\"应用的默认值\" @clickBtn=\"resetPageWidth\" />\r\n            </div>\r\n\r\n            <div id=\"set-theme\" class=\"set-group\">\r\n                <div class=\"set-title\">主题设置</div>\r\n                <div class=\"theme-list\">\r\n                    <div class=\"theme-item\" v-for=\"t in conf.themeList\" :key=\"t.index\" @click=\"useTheme(t)\" :style=\"{background: t.theme.bg, color: t.theme.fontColor}\">\r\n                        <div class=\"theme-close-container\"><Tooltip placement=\"top\" content=\"彻底删除主题\"><div @click.stop=\"delTheme(t)\"><Icon type=\"close-circled\" size=\"15\" class=\"theme-close-btn\"></Icon></div></Tooltip></div>\r\n                        <div class=\"theme-item-content\"><div class=\"theme-text\" :style=\"{background: t.theme.fontBg, padding: '10px', width: '80%', textAlign: 'center',}\">{{ t.name }}</div></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div style=\"text-align: right; margin: 10px 0px 20px 0px\">\r\n                <Tooltip placement=\"top\" content=\"保存当前的配置为新主题\"><Button type=\"ghost\" class=\"app-btn-gutter-l\" @click=\"addTheme\">保存为主题</Button></Tooltip>\r\n                <Tooltip placement=\"top\" content=\"恢复本地配置为应用默认配置\"><Button type=\"ghost\" class=\"app-btn-gutter-l\" @click=\"resetUserConf\">重置</Button></Tooltip>\r\n                <Button type=\"primary\" class=\"app-btn-gutter-l\" @click=\"setVisible=false\">关闭</Button>\r\n            </div>\r\n        </div>\r\n    </DropdownMenu>\r\n</Dropdown>\r\n</template>\r\n\r\n<script>\r\nimport cm from '../common/js'\r\nimport SetSlideItem from '@/components/common/SetSlideItem'\r\nimport { fontList } from '../common/js/theme';\r\n\r\nexport default {\r\n    model: {\r\n        prop: 'conf',\r\n        event: 'changeConf'\r\n    },\r\n    props: {\r\n        conf: Object,\r\n    },\r\n    components: {\r\n        SetSlideItem,\r\n    },\r\n    data () {\r\n        return {\r\n            setVisible: false,\r\n            colors: cm.colors,\r\n            fontList: cm.fontList,\r\n            basePageWidth: cm.basePageWidth,\r\n            defaultTheme: Object.assign({}, cm.defaultTheme),\r\n        }\r\n    },\r\n    beforeCreate () {\r\n        cm.getUserConf(this);\r\n    },\r\n    methods: {\r\n        resetAllColors () {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.fontColor = this.defaultTheme.fontColor; \r\n            tmpConf.theme.fontBg = this.defaultTheme.fontBg; \r\n            tmpConf.theme.bg = this.defaultTheme.bg; \r\n            tmpConf.theme.hdrBg = this.defaultTheme.hdrBg; \r\n            this.setEvHandler(tmpConf);\r\n        },\r\n        setFontColor (arg) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.fontColor = arg;\r\n            this.setEvHandler(tmpConf);\r\n        },\r\n        setFontBg (arg) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.fontBg = arg;\r\n            this.setEvHandler(tmpConf);\r\n        },\r\n        setBg (arg) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.bg = arg;\r\n            this.setEvHandler(tmpConf);\r\n        },\r\n        setHdrBg (arg) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.hdrBg = arg;\r\n            this.setEvHandler(tmpConf);\r\n        },\r\n        setFont (font) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.font = font;\r\n            this.setEvHandler(tmpConf);\r\n        },\r\n        resetFont (arg) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.font = this.defaultTheme.font;\r\n            this.setEvHandler(tmpConf);\r\n        },\r\n        setFontSize (arg) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.fontSize = arg;\r\n            this.$emit('changeConf', tmpConf);\r\n        },\r\n        resetFontSize (arg) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.fontSize = this.defaultTheme.fontSize;\r\n            this.setEvHandler(tmpConf);\r\n        },\r\n        setLetterSpacing (arg) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.letterSpacing = arg;\r\n            this.$emit('changeConf', tmpConf);\r\n        },\r\n        resetLetterSpacing (arg) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.letterSpacing = this.defaultTheme.letterSpacing;\r\n            this.setEvHandler(tmpConf);\r\n        },\r\n        setLineHeight (arg) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.lineHeight = arg;\r\n            this.$emit('changeConf', tmpConf);\r\n        },\r\n        resetLineHeight (arg) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.lineHeight = this.defaultTheme.lineHeight;\r\n            this.setEvHandler(tmpConf);\r\n        },\r\n        setHPadding (arg) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.hPadding = arg;\r\n            this.$emit('changeConf', tmpConf);\r\n        },\r\n        resetHPadding (arg) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.hPadding = this.defaultTheme.hPadding;\r\n            this.setEvHandler(tmpConf);\r\n        },\r\n        setVPadding (arg) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.vPadding = arg;\r\n            this.$emit('changeConf', tmpConf);\r\n        },\r\n        resetVPadding (arg) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.vPadding = this.defaultTheme.vPadding;\r\n            this.setEvHandler(tmpConf);\r\n        },\r\n        setPageWidth (arg) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.pageWidth = arg;\r\n            this.$emit('changeConf', tmpConf);\r\n        },\r\n        resetPageWidth (arg) {\r\n            let tmpConf = Object.assign({}, this.conf);\r\n            tmpConf.theme.pageWidth = this.defaultTheme.pageWidth;\r\n            this.setEvHandler(tmpConf);\r\n        },\r\n        addTheme () {\r\n            let tmpTheme = Object.assign({}, this.conf.theme);\r\n            let t = new cm.themeListItem(this.conf.themeList.length + 1, tmpTheme);\r\n            let tmpConf = new cm.userConf(Object.assign({}, tmpTheme), this.conf.themeList.concat(t));\r\n            this.setEvHandler(tmpConf);\r\n        },\r\n        delTheme (t) {\r\n            console.log(\"delTheme: \" + t.name);\r\n            let list = JSON.parse(JSON.stringify(this.conf.themeList));\r\n            let deleted = false;\r\n\r\n            for (let i=0; i<list.length; i++){\r\n                if (t.name == list[i].name){\r\n                    list.splice(i, 1);\r\n                    deleted = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (deleted) {\r\n                let tmpConf = new cm.userConf(this.conf.theme, list);\r\n                this.setEvHandler(tmpConf);\r\n            } else {\r\n                this.$Modal.error({\r\n                    title: \"删除主题出错\",\r\n                    content: \"找不到主题\",\r\n                });\r\n            }\r\n            \r\n        },\r\n        useTheme (t) {\r\n            let tmpConf = new cm.userConf(Object.assign({}, t.theme), this.conf.themeList);\r\n            this.setEvHandler(tmpConf);\r\n        },\r\n        resetUserConf () {\r\n            let tmpConf = new cm.userConf(Object.assign({}, cm.defaultTheme), JSON.parse(JSON.stringify(cm.themeList)));\r\n            this.setEvHandler(tmpConf);\r\n        },\r\n        setEvHandler (saveConf) {\r\n            console.log(\"setEvHandler\");\r\n            cm.saveUserConf(this, saveConf);\r\n            this.$emit('changeConf', saveConf);\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    #setArea {\r\n        width: 620px;\r\n        \r\n        padding: 0px 30px;\r\n    }\r\n    .set-group{\r\n        padding: 16px 0px;\r\n    }\r\n    .set-item{\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n    }\r\n    .set-title{\r\n        padding-bottom: 16px;\r\n    }\r\n    .set-item .slider{\r\n        flex-grow: 1;\r\n    }\r\n    .theme-list{\r\n        display: flex;\r\n        justify-content: flex-start;\r\n        flex-wrap: wrap;\r\n    }\r\n    .theme-item{\r\n        width: 88px;\r\n        height: 88px;\r\n        margin: 5px 5px 0px 0px;       \r\n    }\r\n    .theme-text{\r\n        -webkit-touch-callout: none;\r\n        -webkit-user-select: none;\r\n        -khtml-user-select: none;\r\n        -moz-user-select: none;\r\n        -ms-user-select: none;\r\n        user-select: none;\r\n    }\r\n    .theme-item-content{\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n    .theme-close-container{\r\n        display: flex;\r\n        justify-content: flex-end;\r\n\r\n        height: 30px;\r\n    }\r\n    .theme-close-btn{\r\n        margin-right: 6px;\r\n        margin-top: 6px;\r\n        cursor: pointer;\r\n    }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/hdr/HdrSet.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Dropdown',{attrs:{\"id\":\"setting\",\"placement\":\"bottom-end\",\"trigger\":\"custom\",\"transfer\":\"\",\"visible\":_vm.setVisible}},[_c('AppBtn',{attrs:{\"icon\":\"ios-gear\"},on:{\"click\":function($event){_vm.setVisible = !_vm.setVisible}}}),_vm._v(\" \"),_c('DropdownMenu',{attrs:{\"slot\":\"list\"},slot:\"list\"},[_c('div',{attrs:{\"id\":\"setArea\"}},[_c('div',{staticClass:\"set-group\",attrs:{\"id\":\"set-color\"}},[_c('div',{staticClass:\"set-title\"},[_vm._v(\"\\r\\n                    颜色设置\\r\\n                    \"),_c('Tooltip',{attrs:{\"content\":\"使用默认主题色\"}},[_c('Button',{staticClass:\"app-btn-gutter-l\",attrs:{\"type\":\"ghost\",\"size\":\"small\"},on:{\"click\":_vm.resetAllColors}},[_vm._v(\"\\r\\n                            默认\\r\\n                        \")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"set-item\"},[_c('div',[_vm._v(\"文字: \"),_c('ColorPicker',{attrs:{\"value\":_vm.conf.theme.fontColor,\"colors\":_vm.colors,\"size\":\"small\"},on:{\"on-change\":_vm.setFontColor}})],1),_vm._v(\" \"),_c('div',{staticClass:\"app-btn-gutter-l\"},[_vm._v(\"纸张: \"),_c('ColorPicker',{attrs:{\"value\":_vm.conf.theme.fontBg,\"colors\":_vm.colors,\"size\":\"small\"},on:{\"on-change\":_vm.setFontBg}})],1),_vm._v(\" \"),_c('div',{staticClass:\"app-btn-gutter-l\"},[_vm._v(\"背景: \"),_c('ColorPicker',{attrs:{\"value\":_vm.conf.theme.bg,\"colors\":_vm.colors,\"size\":\"small\"},on:{\"on-change\":_vm.setBg}})],1),_vm._v(\" \"),_c('div',{staticClass:\"app-btn-gutter-l\"},[_vm._v(\"页首: \"),_c('ColorPicker',{attrs:{\"value\":_vm.conf.theme.hdrBg,\"colors\":_vm.colors,\"size\":\"small\"},on:{\"on-change\":_vm.setHdrBg}})],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"set-group\",attrs:{\"id\":\"set-font\"}},[_c('div',{staticClass:\"set-title\"},[_vm._v(\"字体设置\")]),_vm._v(\"字体\\r\\n                \"),_c('Tooltip',{attrs:{\"placement\":\"top\",\"content\":\"首次设置需要下载字体\"}},[_c('Select',{staticClass:\"app-btn-gutter-l\",staticStyle:{\"width\":\"180px\"},attrs:{\"value\":_vm.conf.theme.font,\"placeholder\":\"conf.theme.font\",\"size\":\"small\",\"filterable\":\"\"},on:{\"on-change\":_vm.setFont}},_vm._l((_vm.fontList),function(item){return _c('Option',{key:item.index,attrs:{\"value\":item.font}},[_c('span',[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('span',{staticStyle:{\"float\":\"right\",\"color\":\"#ccc\"}},[_vm._v(_vm._s(item.size))])])}))],1),_vm._v(\" \"),_c('Tooltip',{attrs:{\"content\":\"使用浏览器默认字体\"}},[_c('Button',{staticClass:\"app-btn-gutter-l\",attrs:{\"type\":\"ghost\",\"size\":\"small\"},on:{\"click\":_vm.resetFont}},[_vm._v(\"默认\")])],1),_vm._v(\" \"),_c('SetSlideItem',{attrs:{\"title\":\"字体大小\",\"value\":_vm.conf.theme.fontSize,\"max\":300,\"btnTips\":\"应用的默认值\"},on:{\"slide\":_vm.setFontSize,\"slideEnd\":function($event){_vm.setEvHandler(_vm.conf)},\"clickBtn\":_vm.resetFontSize}})],1),_vm._v(\" \"),_c('div',{staticClass:\"set-group\",attrs:{\"id\":\"set-gutter\"}},[_c('SetSlideItem',{attrs:{\"title\":\"文字间隔\",\"value\":_vm.conf.theme.letterSpacing,\"min\":-2,\"max\":20,\"btnTips\":\"应用的默认值\"},on:{\"slide\":_vm.setLetterSpacing,\"slideEnd\":function($event){_vm.setEvHandler(_vm.conf)},\"clickBtn\":_vm.resetLetterSpacing}}),_vm._v(\" \"),_c('SetSlideItem',{attrs:{\"title\":\"行&ensp;间&ensp;距\",\"value\":_vm.conf.theme.lineHeight,\"max\":500,\"btnTips\":\"应用的默认值\"},on:{\"slide\":_vm.setLineHeight,\"slideEnd\":function($event){_vm.setEvHandler(_vm.conf)},\"clickBtn\":_vm.resetLineHeight}}),_vm._v(\" \"),_c('SetSlideItem',{attrs:{\"title\":\"上下边距\",\"value\":_vm.conf.theme.hPadding,\"max\":300,\"btnTips\":\"应用的默认值\"},on:{\"slide\":_vm.setHPadding,\"slideEnd\":function($event){_vm.setEvHandler(_vm.conf)},\"clickBtn\":_vm.resetHPadding}}),_vm._v(\" \"),_c('SetSlideItem',{attrs:{\"title\":\"左右边距\",\"value\":_vm.conf.theme.vPadding,\"max\":300,\"btnTips\":\"应用的默认值\"},on:{\"slide\":_vm.setVPadding,\"slideEnd\":function($event){_vm.setEvHandler(_vm.conf)},\"clickBtn\":_vm.resetVPadding}}),_vm._v(\" \"),_c('SetSlideItem',{attrs:{\"title\":\"纸张大小\",\"value\":_vm.conf.theme.pageWidth,\"max\":500,\"btnTips\":\"应用的默认值\"},on:{\"slide\":_vm.setPageWidth,\"slideEnd\":function($event){_vm.setEvHandler(_vm.conf)},\"clickBtn\":_vm.resetPageWidth}})],1),_vm._v(\" \"),_c('div',{staticClass:\"set-group\",attrs:{\"id\":\"set-theme\"}},[_c('div',{staticClass:\"set-title\"},[_vm._v(\"主题设置\")]),_vm._v(\" \"),_c('div',{staticClass:\"theme-list\"},_vm._l((_vm.conf.themeList),function(t){return _c('div',{key:t.index,staticClass:\"theme-item\",style:({background: t.theme.bg, color: t.theme.fontColor}),on:{\"click\":function($event){_vm.useTheme(t)}}},[_c('div',{staticClass:\"theme-close-container\"},[_c('Tooltip',{attrs:{\"placement\":\"top\",\"content\":\"彻底删除主题\"}},[_c('div',{on:{\"click\":function($event){$event.stopPropagation();_vm.delTheme(t)}}},[_c('Icon',{staticClass:\"theme-close-btn\",attrs:{\"type\":\"close-circled\",\"size\":\"15\"}})],1)])],1),_vm._v(\" \"),_c('div',{staticClass:\"theme-item-content\"},[_c('div',{staticClass:\"theme-text\",style:({background: t.theme.fontBg, padding: '10px', width: '80%', textAlign: 'center',})},[_vm._v(_vm._s(t.name))])])])}))]),_vm._v(\" \"),_c('div',{staticStyle:{\"text-align\":\"right\",\"margin\":\"10px 0px 20px 0px\"}},[_c('Tooltip',{attrs:{\"placement\":\"top\",\"content\":\"保存当前的配置为新主题\"}},[_c('Button',{staticClass:\"app-btn-gutter-l\",attrs:{\"type\":\"ghost\"},on:{\"click\":_vm.addTheme}},[_vm._v(\"保存为主题\")])],1),_vm._v(\" \"),_c('Tooltip',{attrs:{\"placement\":\"top\",\"content\":\"恢复本地配置为应用默认配置\"}},[_c('Button',{staticClass:\"app-btn-gutter-l\",attrs:{\"type\":\"ghost\"},on:{\"click\":_vm.resetUserConf}},[_vm._v(\"重置\")])],1),_vm._v(\" \"),_c('Button',{staticClass:\"app-btn-gutter-l\",attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.setVisible=false}}},[_vm._v(\"关闭\")])],1)])])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0d7305a1\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/hdr/HdrSet.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0d7305a1\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HdrSet.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./HdrSet.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./HdrSet.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0d7305a1\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./HdrSet.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-0d7305a1\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/hdr/HdrSet.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div :style=\"{background: conf.theme.fontBg, color: conf.theme.fontColor, fontSize: conf.theme.fontSize+'%', lineHeight: conf.theme.lineHeight+'%', letterSpacing: conf.theme.letterSpacing+'px', paddingLeft: conf.theme.vPadding+'px', paddingRight: conf.theme.vPadding+'px', paddingTop: conf.theme.hPadding+'px', paddingBottom: conf.theme.hPadding+'px', width: (conf.theme.pageWidth*basePageWidth)+'px'}\">\r\n        <h2 id=\"caption-title\">{{ captionTitle }}</h2>\r\n        <p id=\"content\">{{ content }}</p>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport cm from './common/js'\r\nexport default {\r\n    props: ['relDir', 'file', 'caption', 'catalogs', 'conf'],\r\n    data () {\r\n        return {\r\n            captionTitle: null,\r\n            content: null,\r\n            basePageWidth: cm.basePageWidth,\r\n        }\r\n    },\r\n    created () {\r\n        getReadPosition(this);\r\n        cm.bus.$on('goBookmarkEv', this.goBookmarkEvHandler)\r\n    },\r\n    mounted () {\r\n        //如果自动记录的 caption 和用户输入的 caption 相同，直接 goCaption 到自动记录的 caption 不会触发路由变化，也就不会触发获取 content 函数，所以需要手动获取一次自动记录的章节内容\r\n        this.goCaption(this.readPosition.caption);\r\n        this.fetchContent(this.readPosition.caption);\r\n\r\n        registkeyupHandler(this);\r\n        registScrollHandler(this);\r\n    },\r\n    watch: {\r\n        caption () {\r\n            this.fetchContent(this.caption);\r\n        },\r\n        catalogs () {\r\n             this.captionTitle = this.getCaptionTitleCur();\r\n        },\r\n        content () {\r\n            console.log(\"content changed\");\r\n            this.captionTitle = this.getCaptionTitleCur();\r\n\r\n            this.$nextTick(this.setReadPositionScroll);\r\n            this.$nextTick(this.saveReadPosition);\r\n        },\r\n        captionTitle () {\r\n            this.$emit('updateContentEv', this.captionTitle);\r\n        },\r\n    },\r\n    methods: {\r\n        goCaption (val) {\r\n            cm.goCaption(this, this.relDir, this.file, val);\r\n        },\r\n        fetchContent (caption) {\r\n            cm.fetchCaptionContent(this, this.relDir, this.file, caption);\r\n            \r\n        },\r\n        getCaptionTitleCur () {\r\n            return cm.getCaptionTitleCur(this);\r\n        },\r\n        saveReadPosition () {\r\n            saveReadPosition(this);\r\n        },\r\n        setReadPositionScroll () {\r\n            cm.setReadPositionScroll(this);\r\n        },\r\n        goBookmarkEvHandler (readPosition) {\r\n            let self = this;\r\n\r\n            self.readPosition = readPosition;\r\n            let caption = self.caption;\r\n            if (caption != readPosition.caption) {\r\n                console.log(\"goBookmark: NOT in bookmark's caption, goCaption\");\r\n                self.goCaption(readPosition.caption);\r\n            } else {\r\n                console.log(\"goBookmark: in bookmark's caption, set position directly\");\r\n                cm.setReadPositionScroll(self);\r\n            }\r\n        },\r\n    },\r\n}\r\n\r\nfunction registkeyupHandler(self){\r\n    console.log(\"registkeyupHandler\");\r\n    document.onkeyup = function(ev){\r\n        console.log(\"registkeyupHandler\");\r\n        switch (ev.keyCode) {\r\n            case 37: //left\r\n                self.goPrev();\r\n                break;\r\n            case 39: //right\r\n                self.goNext();\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n}\r\nfunction registScrollHandler(self) {\r\n    console.log(\"registScrollHandler\");\r\n    let m = document.getElementById(\"main\");\r\n    m.onscroll = function() {\r\n        saveReadPosition(self);\r\n    }\r\n}\r\n// 保存当前阅读进度到自动进度记录 self.readPosition\r\nfunction saveReadPosition(self){\r\n    cm.updateReadPosition(self, self.readPosition);\r\n    localStorage.setItem(self.readPosition.key, JSON.stringify(self.readPosition));\r\n    //console.log(\"saved readPosition: \" + JSON.stringify(self.readPosition));\r\n}\r\n//从本地读取之前的阅读进度记录\r\nfunction getReadPosition(self){\r\n    console.log(\"getReadPosition for \" + self.relDir + self.file);\r\n    let key = \"readPosition-\" + self.relDir + self.file;\r\n    self.readPosition = JSON.parse(localStorage.getItem(key));\r\n    \r\n    if (!self.readPosition) {\r\n        console.log(\"no saved readPosition for this file, create.\");\r\n        let caption = self.caption;\r\n        self.readPosition = new cm.ReadPosition(self.relDir + self.file, caption, self.captionTitle, 0, 0, Date());\r\n        console.log(\"created readPosition: \" + JSON.stringify(self.readPosition));\r\n    }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n    #caption-title{\r\n        padding-bottom: 20px;\r\n    }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/Content.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({background: _vm.conf.theme.fontBg, color: _vm.conf.theme.fontColor, fontSize: _vm.conf.theme.fontSize+'%', lineHeight: _vm.conf.theme.lineHeight+'%', letterSpacing: _vm.conf.theme.letterSpacing+'px', paddingLeft: _vm.conf.theme.vPadding+'px', paddingRight: _vm.conf.theme.vPadding+'px', paddingTop: _vm.conf.theme.hPadding+'px', paddingBottom: _vm.conf.theme.hPadding+'px', width: (_vm.conf.theme.pageWidth*_vm.basePageWidth)+'px'})},[_c('h2',{attrs:{\"id\":\"caption-title\"}},[_vm._v(_vm._s(_vm.captionTitle))]),_vm._v(\" \"),_c('p',{attrs:{\"id\":\"content\"}},[_vm._v(_vm._s(_vm.content))])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-bfbcbdfc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Content.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-bfbcbdfc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Content.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Content.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Content.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-bfbcbdfc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Content.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-bfbcbdfc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Content.vue\n// module id = null\n// module chunks = ","<style scoped>\r\n    #layout{\r\n        height: 100vh;\r\n\r\n        display: flex;\r\n        flex-direction: column;\r\n\r\n        overflow: hidden;\r\n    }\r\n    #hdr-container{\r\n        display: flex;\r\n\r\n        width: 100%;\r\n        padding: 14px 50px;\r\n    }\r\n    #main{\r\n        flex-grow: 1;\r\n        overflow: auto;\r\n    }\r\n    .footer{\r\n        color: #777;\r\n        mix-blend-mode: difference;\r\n    }\r\n    #content{\r\n        text-align: justify;\r\n    }\r\n\r\n    #hdr-left{\r\n        flex-grow: 0;\r\n\r\n        display: flex;\r\n        align-items: center;\r\n\r\n        color: #fff;\r\n        mix-blend-mode: difference;\r\n    }\r\n    #hdr-center{\r\n        flex-grow: 1;\r\n    }\r\n    #hdr-right{\r\n        flex-grow: 0;\r\n        \r\n        display: flex;\r\n        justify-content: flex-end;\r\n    }\r\n\r\n    #main-layout{\r\n        display: flex;\r\n        justify-content: center;\r\n    }\r\n    #left{\r\n        flex-grow: 1;\r\n        cursor: pointer;\r\n    }\r\n    #center{\r\n        min-height: 800px;\r\n        margin: 25px auto;\r\n        height: auto;\r\n    }\r\n    #right{\r\n        flex-grow: 1;\r\n        cursor: pointer;\r\n    }\r\n    #goNext{\r\n        position: fixed;\r\n        top: 50%;\r\n        right: 20px;\r\n    }\r\n    #goPrev{\r\n        position: fixed;\r\n        top: 50%;\r\n        left: 20px;\r\n    }\r\n</style>\r\n<template>\r\n<div id=\"layout\" :style=\"{background: conf.theme.bg, fontFamily: conf.theme.font}\">\r\n    <div id=\"hdr\" :style=\"{background: conf.theme.hdrBg}\">\r\n        <div id=\"hdr-container\">\r\n            <div id=\"hdr-left\">{{ captionTitle }}</div>\r\n            <div id=\"hdr-center\"></div>\r\n            <div id=\"hdr-right\">\r\n                <HdrBookmarks class=\"app-btn-gutter-l\" :relDir=\"relDir\" :file=\"file\" :caption=\"caption\" :captionTitle=\"captionTitle\" />\r\n                <HdrCatalogs class=\"app-btn-gutter-l\" :relDir=\"relDir\" :file=\"file\" :caption=\"caption\" @goCaptionByCatalog=\"goCaption\" @sendCatalogs=\"recvCatalogs\" />\r\n                <HdrSet class=\"app-btn-gutter-l\" v-model=\"conf\" />\r\n                <HdrMore class=\"app-btn-gutter-l\" :relDir=\"relDir\" :file=\"file\"/>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div id=\"main\" @scroll.native=\"saveReadPosition\">\r\n        <div id=\"main-layout\">\r\n            <div id=\"left\" v-on:click=\"goPrev\">\r\n                <AppBtn id=\"goPrev\" icon=\"ios-arrow-back\" />\r\n            </div>\r\n            <div id=\"center\">\r\n                <Content :relDir=\"relDir\" :file=\"file\" :caption=\"caption\" :conf=\"conf\" :catalogs=\"catalogs\" @updateContentEv=\"updateContentEvHandler\" />\r\n                <Footer class=\"layout-footer-center footer\" :style=\"{background: 'transparent'}\">2018 &copy; lightimehpq@gmail.com</Footer>\r\n            </div>\r\n            <div id=\"right\" v-on:click=\"goNext\">\r\n                <AppBtn id=\"goNext\" icon=\"ios-arrow-forward\" />\r\n            </div>\r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n</template>\r\n<script>\r\nimport axios from 'axios'\r\nimport cm from './common/js'\r\nimport HdrBookmarks from '@/components/hdr/HdrBookmarks'\r\nimport HdrMore from '@/components/hdr/HdrMore'\r\nimport HdrCatalogs from '@/components/hdr/HdrCatalogs'\r\nimport HdrSet from '@/components/hdr/HdrSet'\r\nimport Content from '@/components/Content'\r\n\r\nlet conf = new cm.userConf(Object.assign({}, cm.defaultTheme), JSON.parse(JSON.stringify(cm.themeList)));\r\n    \r\n    export default {\r\n        components: {\r\n            HdrMore,\r\n            HdrCatalogs,\r\n            HdrBookmarks,\r\n            HdrSet,\r\n            Content,\r\n            },\r\n        data() {\r\n            return {\r\n                path: this.$route.params.path,\r\n                fileInfo: null,\r\n                catalogs: null,\r\n                captionTitle: null,\r\n                loading: true,\r\n                conf: conf,\r\n                bookInfoModal: false,\r\n                readPosition: null,\r\n            }\r\n        },\r\n        computed: {\r\n            relDir: function(){ // file dir relative to bookRoot\r\n                if (!this.$route.params.path) return \"/\";\r\n                let params = this.$route.params.path.split(\"/\");\r\n                if (params.length < 3) return \"/\";\r\n                let dirStrs = params.slice(0, params.length-2);\r\n                let dir = \"/\";\r\n                for (let i = 0; i < dirStrs.length; i++) {\r\n                    dir += (dirStrs[i] + \"/\");\r\n                }\r\n                return dir;\r\n            },\r\n            file: function(){\r\n                if (!this.$route.params.path) return null;\r\n                let params = this.$route.params.path.split(\"/\");\r\n                if (params.length == 0) return null;\r\n                if (params.length == 1) return this.path;\r\n                return params[params.length-2];\r\n            },\r\n            caption: function(){\r\n                if (!this.$route.params.path) return null;\r\n                let params = this.$route.params.path.split(\"/\");\r\n                if (params.length < 2) return null;\r\n                return params[params.length-1];\r\n            },\r\n        },\r\n        created () {\r\n            // 组件创建完后获取数据，\r\n            // 此时 data 已经被 observed 了\r\n            /* console.log(\"created: path: \" + this.path);\r\n            console.log(\"created: relDir: \" + this.relDir);\r\n            console.log(\"created: file: \" + this.file);\r\n            console.log(\"created: caption: \" + this.caption); */\r\n        },\r\n        mounted () {\r\n        },\r\n        watch: {\r\n            // 如果路由有变化，会再次执行该方法\r\n            '$route' (to, from) {\r\n            },\r\n        },\r\n        methods: {\r\n            recvCatalogs (cata) {\r\n                this.catalogs = cata;\r\n            },\r\n            goCaption (val) {\r\n                cm.goCaption(this, this.relDir, this.file, val);\r\n            },\r\n            replaceCaption (val) {\r\n                console.log(\"replaceCaption\");\r\n                let p = \"/read/\" + this.relDir + \"/\" + this.file + \"/\" + val;\r\n                console.log(\"replaceCaption: \" + p);\r\n                this.$router.replace({ path: p });\r\n            },\r\n            updateContentEvHandler (arg) {\r\n                this.captionTitle = arg;\r\n            },\r\n            goPrev () {\r\n                let self = this;\r\n                goPrev(self);\r\n            },\r\n            goNext () {\r\n                let self = this;\r\n                goNext(self)\r\n            },\r\n        }\r\n    }\r\n\r\n    function goPrev(self) {\r\n        let caption = self.caption;\r\n        let index = caption.replace(/.txt$/, \"\")\r\n        let prevIndex = (parseInt(index)-1);\r\n        if (prevIndex < 1) return;\r\n\r\n        let prevCaption = prevIndex + \".txt\";\r\n        self.goCaption(prevCaption);\r\n    }\r\n\r\n    function goNext(self) {\r\n        let caption = self.caption;\r\n        let index = caption.replace(/.txt$/, \"\");\r\n        let nextIndex = (parseInt(index)+1);\r\n        if ((nextIndex-1) >= self.catalogs.length) return;\r\n        let nextCaption = nextIndex + \".txt\";\r\n        self.goCaption(nextCaption);\r\n    }\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Layout.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:({background: _vm.conf.theme.bg, fontFamily: _vm.conf.theme.font}),attrs:{\"id\":\"layout\"}},[_c('div',{style:({background: _vm.conf.theme.hdrBg}),attrs:{\"id\":\"hdr\"}},[_c('div',{attrs:{\"id\":\"hdr-container\"}},[_c('div',{attrs:{\"id\":\"hdr-left\"}},[_vm._v(_vm._s(_vm.captionTitle))]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"hdr-center\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"hdr-right\"}},[_c('HdrBookmarks',{staticClass:\"app-btn-gutter-l\",attrs:{\"relDir\":_vm.relDir,\"file\":_vm.file,\"caption\":_vm.caption,\"captionTitle\":_vm.captionTitle}}),_vm._v(\" \"),_c('HdrCatalogs',{staticClass:\"app-btn-gutter-l\",attrs:{\"relDir\":_vm.relDir,\"file\":_vm.file,\"caption\":_vm.caption},on:{\"goCaptionByCatalog\":_vm.goCaption,\"sendCatalogs\":_vm.recvCatalogs}}),_vm._v(\" \"),_c('HdrSet',{staticClass:\"app-btn-gutter-l\",model:{value:(_vm.conf),callback:function ($$v) {_vm.conf=$$v},expression:\"conf\"}}),_vm._v(\" \"),_c('HdrMore',{staticClass:\"app-btn-gutter-l\",attrs:{\"relDir\":_vm.relDir,\"file\":_vm.file}})],1)])]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"main\"},nativeOn:{\"scroll\":function($event){return _vm.saveReadPosition($event)}}},[_c('div',{attrs:{\"id\":\"main-layout\"}},[_c('div',{attrs:{\"id\":\"left\"},on:{\"click\":_vm.goPrev}},[_c('AppBtn',{attrs:{\"id\":\"goPrev\",\"icon\":\"ios-arrow-back\"}})],1),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"center\"}},[_c('Content',{attrs:{\"relDir\":_vm.relDir,\"file\":_vm.file,\"caption\":_vm.caption,\"conf\":_vm.conf,\"catalogs\":_vm.catalogs},on:{\"updateContentEv\":_vm.updateContentEvHandler}}),_vm._v(\" \"),_c('Footer',{staticClass:\"layout-footer-center footer\",style:({background: 'transparent'})},[_vm._v(\"2018 © lightimehpq@gmail.com\")])],1),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"right\"},on:{\"click\":_vm.goNext}},[_c('AppBtn',{attrs:{\"id\":\"goNext\",\"icon\":\"ios-arrow-forward\"}})],1)])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b6373520\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Layout.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b6373520\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Layout.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Layout.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Layout.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b6373520\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Layout.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b6373520\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Layout.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Spin',{attrs:{\"fix\":\"\"}},[_c('Icon',{staticClass:\"demo-spin-icon-load\",attrs:{\"type\":\"load-c\",\"size\":\"18\"}}),_vm._v(\" \"),_c('div',[_vm._v(\"Loading...\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f02419ae\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Loading.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f02419ae\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Loading.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Loading.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Loading.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f02419ae\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Loading.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f02419ae\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Loading.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <Spin fix>\n        <Icon type=\"load-c\" size=18 class=\"demo-spin-icon-load\"></Icon>\n        <div>Loading...</div>\n    </Spin>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'Loading',\n  data () {\n    return {\n      //msg: '正在加载'\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n  .demo-spin-icon-load{\n    animation: ani-demo-spin 1s linear infinite;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Loading.vue","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Layout from '@/components/Layout'\nimport Loading from '@/components/Loading'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/read/:path*',\n      name: 'Layout',\n      component: Layout,\n    },\n    {\n      path: '/loading',\n      name: \"Loading\",\n      component: Loading,\n    },\n  ],\n  scrollBehavior (to, from, savedPosition) {\n    // return 期望滚动到哪个的位置, 如果之前滚动条不在起始位置，则有 savedPosition\n    //console.log(\"scrollBehavior: \" + savedPosition);\n    if (!savedPosition) return {x:0, y:0};\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Button',{staticClass:\"app-btn\",attrs:{\"type\":\"ghost\",\"shape\":\"circle\",\"icon\":_vm.icon},on:{\"click\":_vm.click}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-490fdc16\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/common/AppBtn.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AppBtn.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AppBtn.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-490fdc16\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./AppBtn.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/common/AppBtn.vue\n// module id = null\n// module chunks = ","<template>\r\n<Button type=\"ghost\" shape=\"circle\" :icon=\"icon\" class=\"app-btn\" @click=\"click\"></Button>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: ['icon'],\r\n    methods: {\r\n        click (arg) {\r\n            this.$emit('click', arg);\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/common/AppBtn.vue","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\n\nimport iView from 'iview';\nimport 'iview/dist/styles/iview.css';\nimport './app.css';\nimport './fonts.css';\n\nimport cm from './components/common/js'\n\n// 引入自定义组件\nimport AppBtn from './components/common/AppBtn'\n\n// 注册自定义组件\nVue.component('AppBtn', AppBtn);\n\nVue.config.productionTip = false\nVue.use(iView);\n\n// 初始化全局通信总线\ncm.bus = new Vue();\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  components: { App },\n  template: '<App/>'\n})\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","function theme(hdrBg, bg, fontBg, fontColor, font, fontSize, lineHeight, vPadding, hPadding, letterSpacing, pageWidth) {\r\n    this.hdrBg = hdrBg;\r\n    this.bg = bg;\r\n    this.fontBg = fontBg;\r\n    this.fontColor = fontColor;\r\n    this.font = font;\r\n    this.fontSize = fontSize;\r\n    this.lineHeight = lineHeight;\r\n    this.vPadding = vPadding;\r\n    this.hPadding = hPadding;\r\n    this.latterSpacing = letterSpacing;\r\n    this.pageWidth = pageWidth;             // width = pageWidth*basePageWidth + 'px'\r\n}\r\n\r\nfunction themeListItem(name, theme) {\r\n    this.name = name;\r\n    this.theme = theme;\r\n}\r\n\r\nconst defaultTheme = {\r\n    hdrBg: '#EFF3F6', \r\n    bg: '#f5f7f9', \r\n    fontBg: '#fff', \r\n    fontColor: '#495060',\r\n    font: \"\",\r\n    fontSize: 120,\r\n    lineHeight: 200,\r\n    vPadding: 50,\r\n    hPadding: 50,\r\n    letterSpacing: 0,\r\n    pageWidth: 100,\r\n};\r\n\r\nconst darkTheme = {\r\n    hdrBg: '#191919', \r\n    bg: '#161616', \r\n    fontBg: '#1c1c1c', \r\n    fontColor: '#7b7a7a',\r\n    font: \"dongqingheiti\",\r\n    fontSize: 135,\r\n    lineHeight: 188,\r\n    vPadding: 50,\r\n    hPadding: 50,\r\n    letterSpacing: 1,\r\n    pageWidth: 100,\r\n};\r\n\r\nconst yelloTheme = {\r\n    hdrBg: '#d8c09b', \r\n    bg: '#e9dec7', \r\n    fontBg: '#e2cca9', \r\n    fontColor: '#4f3f25',\r\n    font: \"siyuanheiti-Regular\",\r\n    fontSize: 120,\r\n    lineHeight: 200,\r\n    vPadding: 50,\r\n    hPadding: 50,\r\n    letterSpacing: 0,\r\n    pageWidth: 100,\r\n}\r\n\r\nconst greenTheme = {\r\n    hdrBg: '#e7f2d2', \r\n    bg: '#eff7df', \r\n    fontBg: '#eaf5d5', \r\n    fontColor: '#5f684d',\r\n    font: \"dongqingheiti\",\r\n    fontSize: 120,\r\n    lineHeight: 200,\r\n    vPadding: 50,\r\n    hPadding: 50,\r\n    letterSpacing: 0,\r\n    pageWidth: 100,\r\n}\r\n\r\nconst pinkTheme = {\r\n    hdrBg: '#ffe3e0', \r\n    bg: '#ffebe9', \r\n    fontBg: '#fee2df', \r\n    fontColor: '#523635',\r\n    font: \"xiliangshaonv\",\r\n    fontSize: 135,\r\n    lineHeight: 200,\r\n    vPadding: 50,\r\n    hPadding: 50,\r\n    letterSpacing: 0,\r\n    pageWidth: 100,\r\n}\r\n\r\nexports.fontList = [\r\n    // 黑体\r\n    {name: '冬青黑体', font: 'dongqingheiti', size: '7.5M'}, \r\n    {name: '苹方常规简体', font: 'pingfangchangguijianti', size: '5.4M'}, \r\n    {name: '苹方极细简体', font: 'pingfangjixijianti', size: '4.9M'}, \r\n    {name: '方正黑简体', font: 'fangzhengheijianti', size: '1.2M'}, \r\n    {name: '思源黑体', font: 'siyuanheiti-Regular', size: '12M'},\r\n    {name: '思源黑体-Thin', font: 'siyuanheiti-Thin', size: '9.4M'}, \r\n    {name: '思源黑体-Bold', font: 'siyuanheiti-Bold', size: '12M'}, \r\n    {name: '文泉正黑', font: 'wenquanzhenghei', size: '5.2M'}, \r\n    {name: '文泉微米黑', font: 'wenquanweimihei', size: '1.4M'}, \r\n    {name: '旗黑修长', font: 'qiheixiuchang', size: '4.8M'},\r\n\r\n    // 宋体\r\n    {name: '方正仿宋简体', font: 'fangzhengfangsongjianti', size: '1.5M'}, \r\n    {name: '方正书宋简体', font: 'fangzhengshusongjianti', size: '1.2M'}, \r\n\r\n    \r\n    // 少女\r\n    {name: '华康少女', font: 'huakangshaonv', size: '1.7M'}, \r\n    {name: '西凉少女', font: 'xiliangshaonv', size: '9.3M'}, \r\n    {name: '青柠幼圆', font: 'qingningyouyuan', size: '2.0M'}, \r\n    \r\n    // 楷体\r\n    {name: '字酷堂黄楷体', font: 'zikutanghuangkaiti', size: '1.1M'},\r\n];\r\n\r\nconst defaultThemeListItem = new themeListItem(\"Default\", defaultTheme);\r\nconst darkThemeListItem = new themeListItem(\"Dark\", darkTheme);\r\nconst yelloThemeListItem = new themeListItem(\"Yellow\", yelloTheme);\r\nconst greenThemeListItem = new themeListItem(\"Green\", greenTheme);\r\nconst pinkThemeListItem = new themeListItem(\"Pink\", pinkTheme);\r\nvar themeList = [\r\n    defaultThemeListItem,\r\n    pinkThemeListItem,\r\n    greenThemeListItem,\r\n    yelloThemeListItem,\r\n    darkThemeListItem,\r\n];\r\n\r\nexports.theme = theme;\r\n\r\nexports.defaultTheme = defaultTheme;\r\nexports.darkTheme = darkTheme;\r\nexports.yelloTheme = yelloTheme;\r\nexports.greenTheme = greenTheme;\r\nexports.pinkTheme = pinkTheme;\r\n\r\nexports.themeList = themeList;\r\nexports.themeListItem = themeListItem;\r\nexports.colors = ['#1c2438', '#495060', '#80848f', '#bbbec4', '#dddee1', '#e9eaec', '#f8f8f9', '#EFF3F6', '#f5f7f9', '#fff'];\r\nexports.basePageWidth = 8;\n\n\n// WEBPACK FOOTER //\n// ./src/components/common/js/theme.js","// 当前模块包含正文相关的功能, 包括获取目录，章节正文，阅读位置的相关操作，章节标题的提取等\r\n\r\nvar axios = require('axios');\r\nvar bapi = require('./backendAPI');\r\n\r\nexports.getCaptionTitleCur = getCaptionTitleCur;\r\nexports.ReadPosition = ReadPosition;\r\nexports.updateReadPosition = updateReadPosition;\r\nexports.setReadPositionScroll = setReadPositionScroll;\r\nexports.goCaption = goCaption;\r\nexports.fetchCaptionContent = fetchCaptionContent;\r\nexports.fetchCatalogs = fetchCatalogs;\r\nexports.fetchBookInfo = fetchBookInfo;\r\nexports.showBookInfoModal = showBookInfoModal;\r\nexports.downloadBook = downloadBook;\r\n\r\n\r\nfunction getCaptionTitleCur(self){\r\n    let caption = self.caption;\r\n    return getCaptionTitleByCaption(self, caption);\r\n}\r\n\r\nfunction getCaptionTitleByCaption(self, caption){\r\n    let i = caption.replace(/.txt$/, \"\");\r\n    if (!self.catalogs) return;\r\n    let captionTitle = self.catalogs[parseInt(i)-1].text;\r\n    captionTitle = captionTitle.replace(/^.*: /, \"\");\r\n    return captionTitle;\r\n}\r\n\r\n// ReadPosition 构造器\r\nfunction ReadPosition(file, caption, captionTitle, scrollTop, scrollMax, saveTime) {\r\n    this.key = \"readPosition-\" + file;  //用于存取的 key, 每个文件只有一个\r\n    this.id = Date().toString() ;       //唯一识别 ID\r\n    this.file = file;                   //阅读记录对应的文件\r\n    this.caption = caption;             //阅读进度：章节\r\n    this.captionTitle = captionTitle;   //章节标题\r\n    this.scrollTop = scrollTop;         //阅读进度：浏览器滚动条位置\r\n    this.scrollMax = scrollMax;         //元素滚动总高度\r\n    this.saveTime = saveTime;           //保存时间\r\n    this.percent = scrollTop/scrollMax; //阅读章节的百分比\r\n}\r\n\r\n// 更新传入的 readPosition 为当前阅读进度\r\n// self 为 vue 示例\r\n// readPosition 为要更新的 ReadPosition\r\nfunction updateReadPosition(self, readPosition){\r\n    let rp = readPosition;\r\n    let el = document.getElementById(\"main\");\r\n    let caption = self.caption;\r\n    rp.caption = caption;\r\n    rp.captionTitle = self.captionTitle;\r\n    rp.scrollTop = el.scrollTop;\r\n    rp.scrollMax = el.scrollTopMax? el.scrollTopMax: el.scrollHeight-el.clientHeight;\r\n    rp.saveTime = new Date();\r\n    rp.saveTimeStr = rp.saveTime.toLocaleDateString() + rp.saveTime.toLocaleTimeString();\r\n    rp.percent = (rp.scrollTop/rp.scrollMax).toFixed(2);\r\n\r\n    return rp;\r\n}\r\n\r\nfunction setReadPositionScroll(self){\r\n    let caption = self.caption;\r\n    let p;\r\n    self.readPosition.caption == caption? p = self.readPosition.scrollTop: p = 0;\r\n    let m = document.getElementById(\"main\");\r\n    console.log(\"setReadPositionScroll: \" + p);\r\n    m.scrollTop = p;\r\n}\r\n\r\n// self: 为 vue 实例\r\n// relDir: 为文件坐在目录相对 bookRoot 的相对路径\r\n// file: 文件名\r\n// caption: 章节文件\r\nfunction goCaption(self, relDir, file, caption){\r\n    let p = \"/read/\" + relDir + \"/\" + file + \"/\" + caption;\r\n    console.log(\"goCaption: \" + p);\r\n    self.$router.push({ path: caption });\r\n}\r\n\r\n//获取指定 caption 的 content\r\nfunction fetchCaptionContent(self, relDir, file, caption) {\r\n    self.$Message.loading({\r\n        content: '读取正文...', \r\n        duration: 0,    \r\n    });\r\n\r\n    let contentUrl = bapi.contentUrl(relDir, file, caption);\r\n    console.log(\"fetchCaptionContent: \" + contentUrl);\r\n    axios.get(contentUrl).then(function(response){\r\n        self.$Message.destroy();\r\n        self.content = response.data;\r\n    }).catch(function(error){\r\n        self.$Message.destroy();\r\n        console.log(error);\r\n        let errStr = \"<p>章节文件路径: \" + contentUrl + \"</p>\";\r\n        errStr += \"err: \" + error;\r\n        self.$Modal.error({\r\n            title: \"读取章节出错\",\r\n            content: errStr,\r\n        });\r\n    });\r\n}\r\n\r\nfunction fetchCatalogs(self, relDir, file){\r\n    let catalogUrl = bapi.catalogUrl(relDir, file);\r\n    console.log(\"HdrCatalogs get catalog: \" + catalogUrl);\r\n\r\n    axios.get(catalogUrl).then(function(response){\r\n        splitCatalogs(response.data, self);\r\n        self.captionTitle = getCaptionTitleCur(self);\r\n        let t = document.getElementsByTagName(\"title\")[0];\r\n        t.innerHTML = self.file;\r\n        self.$emit('sendCatalogs', self.catalogs);\r\n    }).catch(function(error){\r\n        console.log(error);\r\n    });\r\n}\r\n\r\nfunction splitCatalogs(catalogsStr, self) {\r\n    let cls = catalogsStr.split(\"\\n\");\r\n    \r\n    self.catalogs = [];\r\n    for (var i = 0; i < cls.length; i++) {\r\n        if (cls[i] == \"\") {\r\n            continue;\r\n        }\r\n        let item = {name: \"\", text: \"\"};\r\n        item.name = (i+1) + \".txt\";\r\n        item.text = (i+1) +\": \" + cls[i];\r\n        self.catalogs.push(item);\r\n    }\r\n}\r\n\r\nfunction fetchBookInfo(self, relDir, file){\r\n    let infoPath = bapi.bookInfoUrl(relDir, file);\r\n    axios.get(infoPath).then(function(res){\r\n        if (res.status != 200) {\r\n            self.$Message.error(\"获取书籍信息出错: \" + res.status);\r\n            return;\r\n        }\r\n        console.log(res.data);\r\n        self.fileInfo = res.data;\r\n        showBookInfoModal(self);\r\n    }).catch(function(err){\r\n        self.$Message.error(\"获取书籍信息失败: \" + err);\r\n    });\r\n}\r\n\r\nfunction showBookInfoModal(self){\r\n    let info = \"字数：\" + self.fileInfo.Words;\r\n    info += \"<br><br>章节：\" + self.fileInfo.Chapters;\r\n    info += \"<br><br>修改时间：\" + self.fileInfo.ModTime;\r\n    self.$Modal.info({\r\n        title: self.fileInfo.Name,\r\n        content: info,\r\n        closable: true,\r\n    });\r\n}\r\n\r\nfunction downloadBook(relDir, file){\r\n    let a = document.createElement('a');\r\n    a.href = bapi.downloadBookUrl(relDir, file)\r\n    a.download = file;\r\n    //append to body to trigger download in firefox\r\n    document.body.appendChild(a);\r\n\r\n    a.click();\r\n    document.body.removeChild(a);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/common/js/caption.js","// 后端 API 的定义文件，本文件应包含当前项目所有用到的后端 API，以便统一管理\r\nconst bookRoot = '/static/cache/books/';\r\nconst getConfUrl = '/static/cache/conf/user.conf';\r\nconst saveConfUrl = '/api/reader/txt/user/conf';\r\nconst bookmarkRoot = '/static/cache/txt/bookmarks/';\r\n\r\nfunction catalogUrl(relDir, file){\r\n    return bookRoot + relDir + file + \"/\" + \"catalog.txt\";\r\n}\r\n\r\nfunction contentUrl(relDir, file, caption){\r\n    return contentUrl = bookRoot + \"/\" + relDir + \"/\" + file + \"/\" + caption;\r\n}\r\n\r\nfunction bookInfoUrl(relDir, file) {\r\n    return infoPath = bookRoot + \"/\" + relDir + file + \"/info.txt\";\r\n}\r\n\r\nfunction downloadBookUrl(relDir, file) {\r\n    return bookRoot + \"/\" + relDir + \"/\" + file + \"/clearFile/\" + file;\r\n}\r\n\r\nfunction getBookmarkUrl(relDir, file){\r\n    return bookmarkRoot + encodeURIComponent(relDir + file);\r\n}\r\n\r\nfunction saveBookmarkUrl(relDir, file){\r\n    return \"/api/reader/txt/user/bookmarks?file=\" + encodeURIComponent(relDir + file);\r\n}\r\n\r\nexports.getConfUrl = getConfUrl;\r\nexports.saveConfUrl = saveConfUrl;\r\nexports.catalogUrl = catalogUrl;\r\nexports.contentUrl = contentUrl;\r\nexports.bookInfoUrl = bookInfoUrl;\r\nexports.downloadBookUrl = downloadBookUrl;\r\nexports.getBookmarkUrl = getBookmarkUrl;\r\nexports.saveBookmarkUrl = saveBookmarkUrl;\n\n\n// WEBPACK FOOTER //\n// ./src/components/common/js/backendAPI.js"],"sourceRoot":""}